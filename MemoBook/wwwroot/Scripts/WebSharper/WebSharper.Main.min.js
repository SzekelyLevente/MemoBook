(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JS=c.JS||{};e=a.Error;f=c.NonStandardPromiseRejectionException=c.NonStandardPromiseRejectionException||{};g=c.Promise=c.Promise||{};h=c.Pervasives=c.Pervasives||{};i=h.DateTime=h.DateTime||{};j=b.Json=b.Json||{};k=b.Obj=b.Obj||{};l=b.Remoting=b.Remoting||{};m=l.XhrProvider=l.XhrProvider||{};n=l.AjaxRemotingProvider=l.AjaxRemotingProvider||{};o=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};p=b.HtmlContentExtensions=b.HtmlContentExtensions||{};q=p.SingleNode=p.SingleNode||{};r=p.IControlBody=p.IControlBody||{};s=b.Activator=b.Activator||{};t=a.StartupCode$WebSharper_Main$Html=a.StartupCode$WebSharper_Main$Html||{};u=b.Collections=b.Collections||{};v=u.EqualityComparer=u.EqualityComparer||{};w=b.Comparers=b.Comparers||{};x=w.EquatableEqualityComparer=w.EquatableEqualityComparer||{};y=w.BaseEqualityComparer=w.BaseEqualityComparer||{};z=u.Comparer=u.Comparer||{};A=w.ComparableComparer=w.ComparableComparer||{};B=w.BaseComparer=w.BaseComparer||{};C=b.Operators=b.Operators||{};D=b.Nullable=b.Nullable||{};E=b.Utils=b.Utils||{};F=b.Concurrency=b.Concurrency||{};G=F.CT=F.CT||{};H=F.AsyncBody=F.AsyncBody||{};I=F.Scheduler=F.Scheduler||{};J=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};K=b.Enumerator=b.Enumerator||{};L=K.T=K.T||{};M=c.Optional=c.Optional||{};N=b.Arrays=b.Arrays||{};O=b.Seq=b.Seq||{};P=b.List=b.List||{};Q=b.Arrays2D=b.Arrays2D||{};R=b.CancellationTokenSource=b.CancellationTokenSource||{};S=b.BigIntProxyHelpers=b.BigIntProxyHelpers||{};T=b.Char=b.Char||{};U=b.Util=b.Util||{};V=b.DateUtil=b.DateUtil||{};W=b.DateTimeOffset=b.DateTimeOffset||{};X=b.Delegate=b.Delegate||{};Y=u.DictionaryUtil=u.DictionaryUtil||{};Z=u.KeyCollection=u.KeyCollection||{};_0=u.ValueCollection=u.ValueCollection||{};_1=u.Dictionary=u.Dictionary||{};_2=b.Exception=b.Exception||{};_3=b.MatchFailureException=b.MatchFailureException||{};_4=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};_5=b.OperationCanceledException=b.OperationCanceledException||{};_6=b.ArgumentException=b.ArgumentException||{};_7=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};_8=b.ArgumentNullException=b.ArgumentNullException||{};_9=b.InvalidOperationException=b.InvalidOperationException||{};_=b.AggregateException=b.AggregateException||{};$=b.TimeoutException=b.TimeoutException||{};ba=b.FormatException=b.FormatException||{};bb=b.OverflowException=b.OverflowException||{};bc=b.TaskCanceledException=b.TaskCanceledException||{};bd=b.KeyNotFoundException=b.KeyNotFoundException||{};be=a.System=a.System||{};bf=be.Guid=be.Guid||{};bg=u.HashSetUtil=u.HashSetUtil||{};bh=u.HashSet=u.HashSet||{};bi=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bj=bi.LazyRecord=bi.LazyRecord||{};bk=b.Lazy=b.Lazy||{};bl=P.T=P.T||{};bm=b.Slice=b.Slice||{};bn=b.Option=b.Option||{};bo=b.Queue=b.Queue||{};bp=b.Random=b.Random||{};bq=b.Ref=b.Ref||{};br=b.Result=b.Result||{};bs=b.Control=b.Control||{};bt=b.Stack=b.Stack||{};bu=b.Strings=b.Strings||{};bv=b.Task=b.Task||{};bw=b.Task1=b.Task1||{};bx=b.TaskCompletionSource=b.TaskCompletionSource||{};by=b.TaskBuilderBase=b.TaskBuilderBase||{};bz=b.TaskBuilder=b.TaskBuilder||{};bA=b.Unchecked=b.Unchecked||{};bB=a.Microsoft=a.Microsoft||{};bC=bB.FSharp=bB.FSharp||{};bD=bC.Core=bC.Core||{};bE=bD.FSharpValueOption=bD.FSharpValueOption||{};bF=b.ValueOption=b.ValueOption||{};bG=b.Numeric=b.Numeric||{};bH=b&&b.Runtime;bI=a.Promise;bJ=a.JSON;bK=a.String;bL=a.Date;bM=a.console;bN=a.Math;d.GetFieldValues=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push(bO[bR]);return bP;};d.GetFieldNames=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push(bR);return bP;};d.GetFields=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push([bR,bO[bR]]);return bP;};f=c.NonStandardPromiseRejectionException=bH.Class({get_Reason:function(){return this.reason;}},e,f);f.New=bH.Ctor(function(bO){this.message="Promise rejected";a.Object.setPrototypeOf(this,f.prototype);this.reason=bO;},f);g.For=function(bO,bP){var bQ;function bR(){return bQ.MoveNext()?bP(bQ.Current()).then(function(){return bR();}):bI.resolve(null);}bQ=K.Get(bO);return new bI(function(bS){bR();bS();})["finally"](function(){return bQ.Dispose();});};g.AsTask=function(bO){var bP;bP=new bx.New();bO.then(function(bQ){return bP.SetResult(bQ);},function(bQ){return bP.SetException$1(g.unwrapExn(bQ));});return bP.get_Task();};g.AsAsync=function(bO){return F.FromContinuations(function(bP,bQ){bO.then(bP,function(bR){return bQ(g.unwrapExn(bR));});});};g.OfTask=function(bO){return new bI(function(bP,bQ){bO.ContinueWith$1(function(bR){return bR.get_IsCanceled()?bQ(new bc.New()):bR.get_IsFaulted()?bQ(bR.get_Exception()):bP(bR.get_Result());},F.noneCT());});};g.OfAsync=function(bO){return new bI(function(bP,bQ){F.StartWithContinuations(bO,bP,function(bR){bQ(bR);},function(bR){bQ(bR);},null);});};g.unwrapExn=function(bO){return bO instanceof e?bO:new f.New(bO);};i.replace=function(bO,bP){return bO.replace(new a.RegExp("(\\w)\\1*","g"),bP);};i.DateFormatter=function(bO,bP){var bQ;function bR(bS,bT){return bT.length<bS?bu.replicate(bS-bT.length,"0")+bT:bT;}bQ=new a.Date(bO);return i.replace(bP,function(bS){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;bT=bu.Substring(bS,0,1);return bT=="y"?(bU=bS.length,bU===1?a.String(bQ.getFullYear()%10):bU===2?bR(2,a.String(bQ.getFullYear()%100)):bU===3?bR(3,a.String(bQ.getFullYear()%1000)):bU===4?bR(4,a.String(bQ.getFullYear())):bU===5?bR(5,a.String(bQ.getFullYear())):bS):bT=="M"?(bV=bS.length,bV===1?a.String(bQ.getMonth()+1):bV===2?bR(2,a.String(bQ.getMonth()+1)):bS):bT=="d"?(bW=bS.length,bW===1?a.String(bQ.getMonth()+1):bW===2?bR(2,a.String(bQ.getMonth()+1)):bS):bT=="h"?(bX=bQ.getHours(),(bY=bS.length,bY===1?a.String(bX>12?bX%12:bX):bY===2?bR(2,a.String(bX>12?bX%12:bX)):bS)):bT=="H"?(bZ=bQ.getHours(),(b0=bS.length,b0===1?a.String(bZ):b0===2?bR(2,a.String(bZ)):bS)):bT=="m"?(b1=bS.length,b1===1?a.String(bQ.getMinutes()):b1===2?bR(2,a.String(bQ.getMinutes())):bS):bT=="s"?(b2=bS.length,b2===1?a.String(bQ.getSeconds()):b2===2?bR(2,a.String(bQ.getSeconds())):bS):bT=="f"?a.String(bQ.getMilliseconds()):bS;});};h.GetJS=function(bO,bP){var bQ,bR;bQ=bO;bR=K.Get(bP);try{while(bR.MoveNext())bQ=bQ[bR.Current()];}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return bQ;};h.NewFromSeq=function(bO){var bP,bQ,bR;bP={};bQ=K.Get(bO);try{while(bQ.MoveNext()){bR=bQ.Current();bP[bR[0]]=bR[1];}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}return bP;};j.Activate=function(bO){var bP,bR,bS,bT,bU,bV,bW;function bQ(bX){var bY,bZ,b0,b1,b2;if(bA.Equals(bX,null))return bX;else if(typeof bX=="object"){if(bX instanceof a.Array)return j.shallowMap(bQ,bX);else{bY=j.shallowMap(bQ,bX.$V);bZ=bX.$T;if(bZ===void 0)return bY;else{b0=N.get(bR,bZ);if(b0===1)return P.ofArray(bY);else if(b0===2)return self.WebSharper.Decimal.CreateDecimalBits(bY);else{b1=new(N.get(bR,bZ))();for(var b3 in bY)if(function(b4){b1[b4]=bY[b4];return false;}(b3))break;return b1;}}}}else return bX;}bR=bO?bO.$TYPES:void 0;if(bR===void 0)bP=bO;else{for(bS=0,bT=N.length(bR)-1;bS<=bT;bS++){bW=N.get(bR,bS);switch(!bA.Equals(bW,null)&&bW.length===3?N.get(bW,0)=="WebSharper"?N.get(bW,1)=="List"?N.get(bW,2)=="T"?0:(bV=bW,2):(bV=bW,2):(bV=bW,2):!bA.Equals(bW,null)&&bW.length===2?N.get(bW,0)=="WebSharper"?N.get(bW,1)=="Decimal"?1:(bV=bW,2):(bV=bW,2):(bV=bW,2)){case 0:bU=1;break;case 1:bU=2;break;case 2:bU=j.lookup(bV);break;}N.set(bR,bS,bU);}bP=bO.$DATA;}return bQ(bP);};j.shallowMap=function(bO,bP){var bQ,bR;if(bP instanceof a.Array)return N.map(bO,bP);else if(typeof bP=="object"){bQ={};for(var bS in bP)if(function(bT){bQ[bT]=bO(bP[bT]);return false;}(bS))break;return bQ;}else return bP;};j.lookup=function(bO){var bP,bQ,bR,bS,bT;bR=N.length(bO);bP=self;bQ=0;while(bQ<bR){bS=N.get(bO,bQ);bT=bP[bS];if(!bA.Equals(typeof bT,void 0)){bP=bT;bQ=bQ+1;}else C.FailWith("Invalid server reply. Failed to find type: "+bS);}return bP;};k=b.Obj=bH.Class({Equals:function(bO){return this===bO;},GetHashCode:function(){return -1;}},null,k);k.New=bH.Ctor(function(){},k);m=l.XhrProvider=bH.Class({Sync:function(bO,bP,bQ){var bR;bR=[null];l.ajax(false,bO,bP,bQ,function(bS){bR[0]=bS;},function(bS){throw bS;},function(){l.ajax(false,bO,bP,bQ,function(bS){bR[0]=bS;},function(bS){throw bS;},void 0);});return bR[0];},Async:function(bO,bP,bQ,bR,bS){l.ajax(true,bO,bP,bQ,bR,bS,function(){l.ajax(true,bO,bP,bQ,bR,bS,void 0);});}},k,m);m.New=bH.Ctor(function(){k.New.call(this);},m);n=l.AjaxRemotingProvider=bH.Class({get_EndPoint:function(){return l.EndPoint();},AsyncBase:function(bO,bP){var bQ,bR;bQ=this;bR=null;return F.Delay(function(){var bS,bT;bS=l.makeHeaders(bO);bT=l.makePayload(bP);return F.Bind(F.GetCT(),function(bU){return F.FromContinuations(function(bV,bW,bX){var bY,bZ,b0;function b1(b2){return bY[0]?(bY[0]=false,bX(new _5.New(bU))):null;}bY=[true];bZ=F.Register(bU,function(){b1();});b0=bQ.get_EndPoint();return l.AjaxProvider().Async(b0,bS,bT,function(b2){if(bY[0]){bY[0]=false;bZ.Dispose();bV(j.Activate(bJ.parse(b2)));}},function(b2){if(bY[0]){bY[0]=false;bZ.Dispose();bW(b2);}});});});});},Send:function(bO,bP){F.Start(this.AsyncBase(bO,bP),null);},Task:function(bO,bP){return F.StartAsTask(this.AsyncBase(bO,bP),null);},Async:function(bO,bP){return this.AsyncBase(bO,bP);},Sync:function(bO,bP){var bQ,bR,bS;return j.Activate(bJ.parse((bQ=this.get_EndPoint(),(bR=l.makeHeaders(bO),(bS=l.makePayload(bP),l.AjaxProvider().Sync(bQ,bR,bS))))));}},k,n);n.New=bH.Ctor(function(){k.New.call(this);},n);l.ajax=function(bO,bP,bQ,bR,bS,bT,bU){var bV,bW,bX;bV=new a.XMLHttpRequest();bW=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bV.open("POST",bP,bO);if(bO==true)bV.withCredentials=true;for(var bZ in bQ)bV.setRequestHeader(bZ,bQ[bZ]);if(bW)bV.setRequestHeader("x-csrftoken",bW);function bY(){var b0;if(bV.status==200)bS(bV.responseText);else if(bU&&bV.status==403&&bV.responseText=="CSRF")bU();else{b0="Response status is not 200: ";bT(new e(b0+bV.status));}}if("onload"in bV)bV.onload=bV.onerror=bV.onabort=bY;else bV.onreadystatechange=function(){if(bV.readyState==4)bY();};bV.send(bR);};l.makePayload=function(bO){return bJ.stringify(bO);};l.makeHeaders=function(bO){return{"content-type":"application/json","x-websharper-rpc":bO};};l.AjaxProvider=function(){o.$cctor();return o.AjaxProvider;};l.set_AjaxProvider=function(bO){o.$cctor();o.AjaxProvider=bO;};l.UseHttps=function(){try{return!bu.StartsWith(self.location.href,"https://")&&(l.set_EndPoint(bu.Replace(self.location.href,"http://","https://")),true);}catch(bO){return false;}};l.EndPoint=function(){o.$cctor();return o.EndPoint;};l.set_EndPoint=function(bO){o.$cctor();o.EndPoint=bO;};o.$cctor=function(){o.$cctor=a.ignore;o.EndPoint="?";o.AjaxProvider=new m.New();};q=p.SingleNode=bH.Class({ReplaceInDom:function(bO){this.node.parentNode.replaceChild(this.node,bO);}},k,q);q.New=bH.Ctor(function(bO){k.New.call(this);this.node=bO;},q);r.SingleNode=function(bO){return new q.New(bO);};s.Activate=function(){var bO;if(self.document){bO=self.document.getElementById("websharper-data");if(bO)s.onReady(function(){var bP,bQ;function bR(bU,bV){if(typeof bV=="object"&&"$init"in bV)bV.$preinit(bU);}function bS(bU,bV){if(typeof bV=="object"&&"Body"in bV)bV.Body().ReplaceInDom(self.document.getElementById(bU));else if(typeof bV=="object"&&"$init"in bV)bV.$init(bU);}function bT(bU,bV){if(typeof bV=="object"&&"$init"in bV)bV.$postinit(bU);}bP=j.Activate(bJ.parse(bO.getAttribute("content")));s.set_Instances(bP);bQ=d.GetFields(bP);N.iter(function(bU){return bR(bU[0],bU[1]);},bQ);N.iter(function(bU){return bS(bU[0],bU[1]);},bQ);N.iter(function(bU){return bT(bU[0],bU[1]);},bQ);});}};s.onReady=function(bO){var bP;function bQ(){if(!bP){bP=true;bO();self.document.removeEventListener("DOMContentLoaded",bQ,false);self.removeEventListener("load",bQ,false);}}bP=false;if(self.document.readyState=="complete")bQ();else{self.document.addEventListener("DOMContentLoaded",bQ,false);self.addEventListener("load",bQ,false);}};s.Instances=function(){t.$cctor();return t.Instances;};s.set_Instances=function(bO){t.$cctor();t.Instances=bO;};s.META_ID=function(){t.$cctor();return t.META_ID;};t.$cctor=function(){t.$cctor=a.ignore;t.META_ID="websharper-data";t.Instances=null;};v=u.EqualityComparer=bH.Class({CGetHashCode0:function(bO){return this.GetHashCode$1(bO);},CEquals0:function(bO,bP){return this.Equals$1(bO,bP);},CGetHashCode:function(bO){return this.GetHashCode$1(bO);},CEquals:function(bO,bP){return this.Equals$1(bO,bP);}},k,v);v.New=bH.Ctor(function(){k.New.call(this);},v);x=w.EquatableEqualityComparer=bH.Class({GetHashCode$1:function(bO){return bA.Hash(bO);},Equals$1:function(bO,bP){return bO.EEquals(bP);}},v,x);x.New=bH.Ctor(function(){v.New.call(this);},x);y=w.BaseEqualityComparer=bH.Class({GetHashCode$1:function(bO){return bA.Hash(bO);},Equals$1:function(bO,bP){return bA.Equals(bO,bP);}},v,y);y.New=bH.Ctor(function(){v.New.call(this);},y);z=u.Comparer=bH.Class({Compare0:function(bO,bP){return this.Compare$1(bO,bP);},Compare:function(bO,bP){return this.Compare$1(bO,bP);}},k,z);z.New=bH.Ctor(function(){k.New.call(this);},z);A=w.ComparableComparer=bH.Class({Compare$1:function(bO,bP){return bO.CompareTo(bP);}},z,A);A.New=bH.Ctor(function(){z.New.call(this);},A);B=w.BaseComparer=bH.Class({Compare$1:function(bO,bP){return bA.Compare(bO,bP);}},z,B);B.New=bH.Ctor(function(){z.New.call(this);},B);C.charRange=function(bO,bP){var bQ,bR;bQ=bO.charCodeAt();bR=1+bP.charCodeAt()-bQ;return bR<=0?[]:O.init(bR,function(bS){return bK.fromCharCode(bS+bQ);});};D.op=function(bO,bP,bQ){return bO==null||bP==null?null:bQ(bO,bP);};D.opL=function(bO,bP,bQ){return bO==null?null:bQ(bO,bP);};D.opR=function(bO,bP,bQ){return bP==null?null:bQ(bO,bP);};D.cmp=function(bO,bP,bQ){return bO==null||bP==null?false:bQ(bO,bP);};D.cmpE=function(bO,bP,bQ){return bO==null?bP==null:bP==null?false:bQ(bO,bP);};D.cmpL=function(bO,bP,bQ){return bO==null?false:bQ(bO,bP);};D.cmpR=function(bO,bP,bQ){return bP==null?false:bQ(bO,bP);};D.conv=function(bO,bP){return bO==null?null:bP(bO);};E.spaceForPosSignAdjusted=function(bO){return" "+bO;};E.plusForPosSignAdjusted=function(bO){return"+"+bO;};E.adjustSigned=function(bO,bP){return bO<0?bP===32?bO+(1<<16)*(1<<16):bO+(1<<bP):bO;};E.prettyPrint=function(bO){var bP,bQ;function bR(bS,bT){return bS+" = "+E.prettyPrint(bT);}return bO===null?"null":(bP=typeof bO,bP=="string"?"\""+bO+"\"":bP=="object"?bO instanceof a.Array?"[|"+bu.concat("; ",N.map(E.prettyPrint,bO))+"|]":(bQ=bK(bO),bQ=="[object Object]"?"{"+bu.concat("; ",N.map(function(bS){return bR(bS[0],bS[1]);},d.GetFields(bO)))+"}":bQ):bK(bO));};E.printArray2D=function(bO,bP){return bP===null?"null":"[["+bu.concat("][",O.delay(function(){var bQ;bQ=bP.length?bP[0].length:0;return O.map(function(bR){return bu.concat("; ",O.delay(function(){return O.map(function(bS){return bO(N.get2D(bP,bR,bS));},C.range(0,bQ-1));}));},C.range(0,bP.length-1));}))+"]]";};E.printArray=function(bO,bP){return bP===null?"null":"[|"+bu.concat("; ",N.map(bO,bP))+"|]";};E.printList=function(bO,bP){return"["+bu.concat("; ",O.map(bO,bP))+"]";};E.padNumLeft=function(bO,bP){var bQ;bQ=N.get(bO,0);return bQ==" "||bQ=="+"||bQ=="-"?bQ+bu.PadLeftWith(bO.substr(1),bP-1,"0"):bu.PadLeftWith(bO,bP,"0");};E.spaceForPos=function(bO,bP){return 0<=bO?" "+bP:bP;};E.plusForPos=function(bO,bP){return 0<=bO?"+"+bP:bP;};E.toSafe=function(bO){return bO==null?"":bO;};G.New=function(bO,bP){return{c:bO,r:bP};};H.New=function(bO,bP){return{k:bO,ct:bP};};I=F.Scheduler=bH.Class({tick:function(){var bO,bP,bQ;bP=this;bQ=bL.now();bO=true;while(bO)if(this.robin.length===0){this.idle=true;bO=false;}else{(this.robin.shift())();bL.now()-bQ>40?(a.setTimeout(function(){bP.tick();},0),bO=false):void 0;}},Fork:function(bO){var bP;bP=this;this.robin.push(bO);if(this.idle){this.idle=false;a.setTimeout(function(){bP.tick();},0);}}},k,I);I.New=bH.Ctor(function(){k.New.call(this);this.idle=true;this.robin=[];},I);F.For=function(bO,bP){return F.Using(K.Get(bO),function(bQ){return F.While(function(){return bQ.MoveNext();},F.Delay(function(){return bP(bQ.Current());}));});};F.While=function(bO,bP){return bO()?F.Bind(bP,function(){return F.While(bO,bP);}):F.Return();};F.Using=function(bO,bP){return F.TryFinally(bP(bO),function(){bO.Dispose();});};F.TryCancelled=function(bO,bP){return function(bQ){bO(H.New(function(bR){if(bR.$==2){bP(bR.$0);bQ.k(bR);}else bQ.k(bR);},bQ.ct));};};F.OnCancel=function(bO){return function(bP){bP.k({$:0,$0:F.Register(bP.ct,bO)});};};F.StartChildAsTask=function(bO){return function(bP){(F.StartChild(bO,null))(H.New(function(bQ){if(bQ.$==0)bP.k({$:0,$0:F.StartImmediateAsTask(bQ.$0,{$:1,$0:bP.ct})});},bP.ct));};};F.StartChild=function(bO,bP){return function(bQ){var bR,bS,bT,bU;bR=[true];bS=[null];bT=[];bU=bP!=null&&bP.$==1?{$:1,$0:a.setTimeout(function(){var bV;bR[0]=false;bV={$:1,$0:new $.New()};while(bT.length>0)(bT.shift())(bV);},bP.$0)}:null;F.scheduler().Fork(function(){if(!bQ.ct.c)bO(H.New(function(bV){if(bR[0]){bS[0]={$:1,$0:bV};if(bU!=null&&bU.$==1)a.clearTimeout(bU.$0);while(bT.length>0)(bT.shift())(bV);}},bQ.ct));});bQ.k({$:0,$0:function(bV){var bW;if(bR[0]){bW=bS[0];if(bW==null)bT.push(bV.k);else bV.k(bW.$0);}else bV.k({$:1,$0:new $.New()});}});};};F.Sequential=function(bO){var bP;bP=N.ofSeq(bO);return N.length(bP)===0?F.Return([]):function(bQ){var bR,bS;function bT(bV){var bW;while(true){bW=function(bX){return function(){(N.get(bP,bX))(H.New(function(bY){return bU(bX,bY);},bQ.ct));};}(bV);return F.scheduler().Fork(bW);}}function bU(bV,bW){return bW.$==0?(N.set(bS,bV,bW.$0),bV===bR-1?bQ.k({$:0,$0:bS}):bQ.ct.c?F.cancel(bQ):bT(bV+1)):bQ.k(bW);}bR=bP.length;bS=new a.Array(bR);bT(0);};};F.ParallelWithMaxDegree=function(bO,bP){var bQ;if(bP<=0)C.InvalidArg("maxDegreeOfParallelism","maxDegreeOfParallelism must be positive, was "+bK(bP));bQ=N.ofSeq(bO);return N.length(bQ)===0?F.Return([]):function(bR){var bU,bV,bW,bX,bY;function bS(bZ){F.scheduler().Fork(function(){(N.get(bQ,bZ))(H.New(bT(bZ),bR.ct));});}function bT(bZ){return function(b0){var b1,b2,b3;b2=bV[0];switch(b2===0?0:b2===1?b0.$==0?1:(b1=[b2,b0],3):b0.$==0?2:(b1=[b2,b0],3)){case 0:return null;case 1:N.set(bW,bZ,b0.$0);bV[0]=0;return bR.k({$:0,$0:bW});case 2:return bR.ct.c?(bV[0]=0,F.cancel(bR)):(N.set(bW,bZ,b0.$0),bV[0]=b2-1,b3=bU-b2+bP,b3<bU?bS(b3):null);case 3:bV[0]=0;return bR.k(b1[1]);}};}bU=bQ.length;bV=[bU];bW=new a.Array(bU);for(bX=0,bY=(bA.Compare(bP,bU)===-1?bP:bU)-1;bX<=bY;bX++)bS(bX);};};F.Parallel=function(bO){var bP;bP=N.ofSeq(bO);return N.length(bP)===0?F.Return([]):function(bQ){var bS,bT,bU,bV,bW;function bR(bX,bY){var bZ,b0;b0=bT[0];switch(b0===0?0:b0===1?bY.$==0?1:(bZ=bY,3):bY.$==0?2:(bZ=bY,3)){case 0:return null;case 1:N.set(bU,bX,bY.$0);bT[0]=0;return bQ.k({$:0,$0:bU});case 2:N.set(bU,bX,bY.$0);{bT[0]=b0-1;return;}break;case 3:bT[0]=0;return bQ.k(bZ);}}bS=bP.length;bT=[bS];bU=new a.Array(bS);for(bV=0,bW=bS-1;bV<=bW;bV++)(function(bX){return F.scheduler().Fork(function(){(N.get(bP,bX))(H.New(function(bY){return bR(bX,bY);},bQ.ct));});}(bV));};};F.Sleep=function(bO){return function(bP){var bQ,bR;bQ=void 0;bR=void 0;bQ=a.setTimeout(function(){bR.Dispose();F.scheduler().Fork(function(){bP.k({$:0,$0:null});});},bO);bR=F.Register(bP.ct,function(){a.clearTimeout(bQ);F.scheduler().Fork(function(){F.cancel(bP);});});};};F.StartImmediateAsTask=function(bO,bP){var bQ;bQ=new bx.New();F.StartWithContinuations(bO,function(bR){bQ.SetResult(bR);},function(bR){bQ.SetException$1(bR);},function(){bQ.SetCanceled();},bP);return bQ.get_Task();};F.StartAsTask=function(bO,bP){var bQ;bQ=new bx.New();F.scheduler().Fork(function(){F.StartWithContinuations(bO,function(bR){bQ.SetResult(bR);},function(bR){bQ.SetException$1(bR);},function(){bQ.SetCanceled();},bP);});return bQ.get_Task();};F.AwaitTask1=function(bO){return F.FromContinuations(function(bP,bQ,bR){bA.Equals(bO.get_Status(),0)?bO.Start():void 0;bO.ContinueWith$1(function(bS){return bS.get_IsCanceled()?bR(new _5.New(F.noneCT())):bS.get_IsFaulted()?bQ(bS.get_Exception()):bP(bS.get_Result());},F.noneCT());});};F.AwaitTask=function(bO){return F.FromContinuations(function(bP,bQ,bR){bA.Equals(bO.get_Status(),0)?bO.Start():void 0;bO.ContinueWith$1(function(bS){return bS.get_IsCanceled()?bR(new _5.New(F.noneCT())):bS.get_IsFaulted()?bQ(bS.get_Exception()):bP();},F.noneCT());});};F.AwaitEvent=function(bO,bP){return function(bQ){var bR,bS;bR=void 0;bS=void 0;bR=bO.Subscribe(U.observer(function(bT){bR.Dispose();bS.Dispose();F.scheduler().Fork(function(){bQ.k({$:0,$0:bT});});}));bS=F.Register(bQ.ct,function(){if(bP!=null&&bP.$==1)bP.$0();else{bR.Dispose();F.scheduler().Fork(function(){F.cancel(bQ);});}});};};F.StartImmediate=function(bO,bP){var bQ,bR;bQ=(bR=(F.defCTS())[0],bP==null?bR:bP.$0);if(!bQ.c)bO(H.New(function(bS){if(bS.$==1)F.UncaughtAsyncError(bS.$0);},bQ));};F.Start=function(bO,bP){var bQ,bR;bQ=(bR=(F.defCTS())[0],bP==null?bR:bP.$0);F.scheduler().Fork(function(){if(!bQ.c)bO(H.New(function(bS){if(bS.$==1)F.UncaughtAsyncError(bS.$0);},bQ));});};F.UncaughtAsyncError=function(bO){bM.log("WebSharper: Uncaught asynchronous exception",bO);};F.StartWithContinuations=function(bO,bP,bQ,bR,bS){var bT,bU;bT=(bU=(F.defCTS())[0],bS==null?bU:bS.$0);if(!bT.c)bO(H.New(function(bV){if(bV.$==1)bQ(bV.$0);else if(bV.$==2)bR(bV.$0);else bP(bV.$0);},bT));};F.FromContinuations=function(bO){return function(bP){var bQ;function bR(bS){if(bQ[0])C.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bQ[0]=true;F.scheduler().Fork(bS);}}bQ=[false];bO(function(bS){bR(function(){bP.k({$:0,$0:bS});});},function(bS){bR(function(){bP.k({$:1,$0:bS});});},function(bS){bR(function(){bP.k({$:2,$0:bS});});});};};F.GetCT=function(){J.$cctor();return J.GetCT;};F.Catch=function(bO){return function(bP){try{bO(H.New(function(bQ){if(bQ.$==0)bP.k({$:0,$0:{$:0,$0:bQ.$0}});else if(bQ.$==1)bP.k({$:0,$0:{$:1,$0:bQ.$0}});else bP.k(bQ);},bP.ct));}catch(bQ){bP.k({$:0,$0:{$:1,$0:bQ}});}};};F.TryWith=function(bO,bP){return function(bQ){bO(H.New(function(bR){if(bR.$==0)bQ.k({$:0,$0:bR.$0});else if(bR.$==1)try{(bP(bR.$0))(bQ);}catch(bS){bQ.k(bR);}else bQ.k(bR);},bQ.ct));};};F.TryFinally=function(bO,bP){return function(bQ){bO(H.New(function(bR){try{bP();bQ.k(bR);}catch(bS){bQ.k({$:1,$0:bS});}},bQ.ct));};};F.Delay=function(bO){return function(bP){try{(bO(null))(bP);}catch(bQ){bP.k({$:1,$0:bQ});}};};F.Combine=function(bO,bP){return F.Bind(bO,function(){return bP;});};F.Bind=function(bO,bP){return F.checkCancel(function(bQ){bO(H.New(function(bR){var bS;if(bR.$==0){bS=bR.$0;F.scheduler().Fork(function(){try{(bP(bS))(bQ);}catch(bT){bQ.k({$:1,$0:bT});}});}else F.scheduler().Fork(function(){bQ.k(bR);});},bQ.ct));});};F.Zero=function(){J.$cctor();return J.Zero;};F.Return=function(bO){return function(bP){bP.k({$:0,$0:bO});};};F.checkCancel=function(bO){return function(bP){if(bP.ct.c)F.cancel(bP);else bO(bP);};};F.cancel=function(bO){bO.k({$:2,$0:new _5.New(bO.ct)});};F.defCTS=function(){J.$cctor();return J.defCTS;};F.scheduler=function(){J.$cctor();return J.scheduler;};F.Register=function(bO,bP){var bQ;return bO===F.noneCT()?{Dispose:function(){return null;}}:(bQ=bO.r.push(bP)-1,{Dispose:function(){return N.set(bO.r,bQ,a.ignore);}});};F.noneCT=function(){J.$cctor();return J.noneCT;};J.$cctor=function(){J.$cctor=a.ignore;J.noneCT=G.New(false,[]);J.scheduler=new I.New();J.defCTS=[new R.New()];J.Zero=F.Return();J.GetCT=function(bO){bO.k({$:0,$0:bO.ct});};};L=K.T=bH.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.e===1?this.c:this.e===0?C.FailWith("Enumeration has not started. Call MoveNext."):C.FailWith("Enumeration already finished.");},Current0:function(){return this.Current();},MoveNext:function(){var bO;bO=this.n(this);this.e=bO?1:2;return bO;}},k,L);L.New=bH.Ctor(function(bO,bP,bQ,bR){k.New.call(this);this.s=bO;this.c=bP;this.n=bQ;this.d=bR;this.e=0;},L);K.LRemoveAt=function(bO,bP){if(bO instanceof a.Array){if("resizable"in bO)bO.splice.apply(bO,[bP,1]);else K.FailReadOnly();}else bO.LRemoveAt(bP);};K.LInsert=function(bO,bP,bQ){if(bO instanceof a.Array){if("resizable"in bO)bO.splice.apply(bO,[bP,0,bQ]);else K.FailReadOnly();}else bO.LInsert(bP,bQ);};K.LIndexOf=function(bO,bP){return bO instanceof a.Array?N.findIndexBound(bO,0,N.length(bO),bP==null?function(bQ){return bQ==null;}:function(bQ){var bR;bR=bP;return bA.Equals(bR,bQ);}):bO.LIndexOf(bP);};K.LItemSet=function(bO,bP,bQ){if(bO instanceof a.Array){if("readonly"in bO)K.FailReadOnly();else N.set(bO,bP,bQ);}else bO.set_LItem(bP,bQ);};K.LItemGet=function(bO,bP){return bO instanceof a.Array?N.get(bO,bP):bO.LItem(bP);};K.LRemoveAt0=function(bO,bP){if(bO instanceof a.Array){if("resizable"in bO)bO.splice.apply(bO,[bP,1]);else K.FailReadOnly();}else bO.LRemoveAt0(bP);};K.LRemove0=function(bO,bP){var bQ;if(bO instanceof a.Array){if("resizable"in bO){bQ=N.findIndexBound(bO,0,N.length(bO),bP==null?function(bR){return bR==null;}:function(bR){var bS;bS=bP;return bA.Equals(bS,bR);});if(bQ===-1);else bO.splice.apply(bO,[bQ,1]);}else K.FailReadOnly();}else bO.LRemove0(bP);};K.LInsert0=function(bO,bP,bQ){if(bO instanceof a.Array){if("resizable"in bO)bO.splice.apply(bO,[bP,0,bQ]);else K.FailReadOnly();}else bO.LInsert0(bP,bQ);};K.LIndexOf0=function(bO,bP){return bO instanceof a.Array?N.findIndexBound(bO,0,N.length(bO),bP==null?function(bQ){return bQ==null;}:function(bQ){var bR;bR=bP;return bA.Equals(bR,bQ);}):bO.LIndexOf0(bP);};K.LContains=function(bO,bP){return bO instanceof a.Array?N.contains(bP,bO):bO.LContains(bP);};K.LClear=function(bO){var bP,bQ,bR;if(bO instanceof a.Array){if("resizable"in bO){bP=N.length(bO);bO.splice.apply(bO,[0,bP]);}else if("readonly"in bO)K.FailReadOnly();else{for(bQ=0,bR=N.length(bO)-1;bQ<=bR;bQ++)N.set(bO,bQ,null);}}else bO.LClear();};K.LAdd=function(bO,bP){return bO instanceof a.Array?"resizable"in bO?(bO.push(bP),N.length(bO)-1):K.FailReadOnly():bO.LAdd(bP);};K.LItem0Set=function(bO,bP,bQ){if(bO instanceof a.Array){if("readonly"in bO)K.FailReadOnly();else N.set(bO,bP,bQ);}else bO.set_LItem0(bP,bQ);};K.LItem0Get=function(bO,bP){return bO instanceof a.Array?N.get(bO,bP):bO.LItem0(bP);};K.LIsReadOnly=function(bO){return bO instanceof a.Array?"readonly"in bO:bO.LIsReadOnly();};K.IsFixedSize=function(bO){return bO instanceof a.Array?!("resizable"in bO):bO.LIsReadOnly();};K.Remove=function(bO,bP){var bQ;return bO instanceof a.Array?"resizable"in bO?(bQ=N.findIndexBound(bO,0,N.length(bO),bP==null?function(bR){return bR==null;}:function(bR){var bS;bS=bP;return bA.Equals(bS,bR);}),bQ===-1?false:(bO.splice.apply(bO,[bQ,1]),true)):K.FailReadOnly():"Remove"in bO?bO.Remove(bP):K.FailReadOnly();};K.Contains=function(bO,bP){return bO instanceof a.Array?N.contains(bP,bO):bO.Contains(bP);};K.Clear=function(bO){var bP;if(bO instanceof a.Array){if("resizable"in bO){bP=N.length(bO);bO.splice.apply(bO,[0,bP]);}else K.FailReadOnly();}else if("Clear"in bO)bO.Clear();else K.FailReadOnly();};K.Add=function(bO,bP){if(bO instanceof a.Array){if("resizable"in bO)bO.push(bP);else K.FailReadOnly();}else if("Add"in bO)bO.Add(bP);else K.FailReadOnly();};K.FailReadOnly=function(){return C.FailWith("Collection is read-only.");};K.IsReadOnly=function(bO){return bO instanceof a.Array?!("resizable"in bO):bO.IsReadOnly();};K.CopyTo0=function(bO,bP,bQ){if(bO instanceof a.Array)K.ArrayCopyTo(bO,bP,bQ);else if("CopyTo0"in bO)bO.CopyTo0(bP,bQ);else bO.CopyTo(bP,bQ);};K.CopyTo=function(bO,bP,bQ){if(bO instanceof a.Array)K.ArrayCopyTo(bO,bP,bQ);else bO.CopyTo(bP,bQ);};K.ArrayCopyTo=function(bO,bP,bQ){if(N.length(bO)+bQ<N.length(bP))throw new _6.New$2("array");else void 0;N.blit(bO,0,bP,bQ,N.length(bO));};K.Count0=function(bO){return bO instanceof a.Array?N.length(bO):"Count0"in bO?bO.Count0():bO.Count();};K.Count=function(bO){return bO instanceof a.Array?N.length(bO):bO.Count();};K.Reset=function(bO){if("Reset"in bO)bO.Reset();else C.FailWith("IEnumerator.Reset not supported");};K.Get0=function(bO){return bO instanceof a.Array?K.ArrayEnumerator(bO):bA.Equals(typeof bO,"string")?K.StringEnumerator(bO):"GetEnumerator0"in bO?bO.GetEnumerator0():bO.GetEnumerator();};K.Get=function(bO){return bO instanceof a.Array?K.ArrayEnumerator(bO):bA.Equals(typeof bO,"string")?K.StringEnumerator(bO):bO.GetEnumerator();};K.StringEnumerator=function(bO){return new L.New(0,null,function(bP){var bQ;bQ=bP.s;return bQ<bO.length&&(bP.c=bO[bQ],bP.s=bQ+1,true);},void 0);};K.ArrayEnumerator=function(bO){return new L.New(0,null,function(bP){var bQ;bQ=bP.s;return bQ<N.length(bO)&&(bP.c=N.get(bO,bQ),bP.s=bQ+1,true);},void 0);};M.Undefined={$:0};N.splitInto=function(bO,bP){var bQ,bR,bS,bT,bU,bV,bW,bX,bY;if(bO<=0)C.FailWith("Count must be positive");bR=N.length(bP);if(bR===0)return[];else{bS=bA.Compare(bO,bR)===-1?bO:bR;bT=N.create(bS,null);bU=bR/bS>>0;bQ=0;for(bV=0,bW=bR%bS-1;bV<=bW;bV++){bT[bV]=N.sub(bP,bQ,bU+1);bQ=bQ+bU+1;}for(bX=bR%bS,bY=bS-1;bX<=bY;bX++){bT[bX]=N.sub(bP,bQ,bU);bQ=bQ+bU;}return bT;}};N.contains=function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=N.length(bP);while(bQ&&bR<bT)if(bA.Equals(bP[bR],bO))bQ=false;else bR=bR+1;return!bQ;};N.tryFindBack=function(bO,bP){var bQ,bR,bS;bQ=null;bR=bP.length-1;while(bR>=0&&bQ==null){bS=bP[bR];if(bO(bS))bQ={$:1,$0:bS};bR=bR-1;}return bQ;};N.tryFindIndexBack=function(bO,bP){var bQ,bR;bQ=null;bR=bP.length-1;while(bR>=0&&bQ==null){bO(N.get(bP,bR))?bQ={$:1,$0:bR}:void 0;bR=bR-1;}return bQ;};N.mapFold=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bS=new a.Array(bQ.length);bR=bP;for(bT=0,bU=bQ.length-1;bT<=bU;bT++){bV=bO(bR,bQ[bT]);bS[bT]=bV[0];bR=bV[1];}return[bS,bR];};N.mapFoldBack=function(bO,bP,bQ){var bR,bS,bT,bU,bV,bW,bX,bY;bT=new a.Array(bP.length);bR=bQ;bU=bP.length;for(bV=1,bW=bU;bV<=bW;bV++){bX=bU-bV;bY=bO(bP[bX],bR);bT[bX]=bY[0];bR=bY[1];}return[bT,bR];};N.mapInPlace=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bP[bQ]=bO(bP[bQ]);};N.mapiInPlace=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bP[bQ]=bO(bQ,bP[bQ]);return bP;};N.sortInPlaceByDescending=function(bO,bP){N.mapInPlace(function(bQ){return bQ[0];},N.mapiInPlace(function(bQ,bR){return[bR,[bO(bR),bQ]];},bP).sort(function(bQ,bR){return-bA.Compare(bQ[1],bR[1]);}));};O.tryHead=function(bO){var bP;bP=K.Get(bO);try{return bP.MoveNext()?{$:1,$0:bP.Current()}:null;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.tryItem=function(bO,bP){var bQ,bR,bS;if(bO<0)return null;else{bQ=0;bR=K.Get(bP);try{bS=true;while(bS&&bQ<=bO)if(bR.MoveNext())bQ=bQ+1;else bS=false;return bS?{$:1,$0:bR.Current()}:null;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}}};O.tryLast=function(bO){var bP,bQ,bR;bP=K.Get(bO);try{if(bP.MoveNext()){bR=bP.Current();while(bP.MoveNext())bR=bP.Current();bQ={$:1,$0:bR};}else bQ=null;return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.chunkBySize=function(bO,bP){bO<=0?C.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bQ;bQ=K.Get(bP);return new L.New(true,null,function(bR){var bS;if(bR.s&&bQ.MoveNext()){bS=[bQ.Current()];while(bR.s&&N.length(bS)<bO)if(bQ.MoveNext())bS.push(bQ.Current());else bR.s=false;bR.c=bS;return true;}else return false;},function(){bQ.Dispose();});}};};N.countBy=function(bO,bP){var bQ,bR,bS,bT,bU;bQ=new _1.New$5();bR=[];for(bS=0,bT=N.length(bP)-1;bS<=bT;bS++){bU=bO(bP[bS]);if(bQ.ContainsKey(bU))bQ.set_Item(bU,bQ.Item(bU)+1);else{bR.push(bU);bQ.DAdd(bU,1);}}N.mapInPlace(function(bV){return[bV,bQ.Item(bV)];},bR);return bR;};O.except=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=K.Get(bP);bR=new bh.New$2(bO);return new L.New(null,null,function(bS){var bT,bU;if(bQ.MoveNext()){bT=bQ.Current();bU=bR.SAdd(bT);while(!bU&&bQ.MoveNext()){bT=bQ.Current();bU=bR.SAdd(bT);}return bU&&(bS.c=bT,true);}else return false;},function(){bQ.Dispose();});}};};P.skip=function(bO,bP){var bQ,bR,bS;bQ=bP;for(bR=1,bS=bO;bR<=bS;bR++)if(bQ.$==0)C.FailWith("Input list too short.");else bQ=bQ.$1;return bQ;};N.groupBy=function(bO,bP){var bQ,bR,bS,bT,bU,bV;bQ=new _1.New$5();bR=[];for(bS=0,bT=N.length(bP)-1;bS<=bT;bS++){bU=bP[bS];bV=bO(bU);if(bQ.ContainsKey(bV))bQ.Item(bV).push(bU);else{bR.push(bV);bQ.DAdd(bV,[bU]);}}N.mapInPlace(function(bW){return[bW,bQ.Item(bW)];},bR);return bR;};O.insufficient=function(){return C.FailWith("The input sequence has an insufficient number of elements.");};O.last=function(bO){var bP,bQ,bR;bP=K.Get(bO);try{if(!bP.MoveNext())bQ=O.insufficient();else{bR=bP.Current();while(bP.MoveNext())bR=bP.Current();bQ=bR;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.contains=function(bO,bP){var bQ,bR;bQ=K.Get(bP);try{bR=false;while(!bR&&bQ.MoveNext())bR=bA.Equals(bQ.Current(),bO);return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};P.skipWhile=function(bO,bP){var bQ;bQ=bP;while(!(bQ.$==0)&&bO(P.head(bQ)))bQ=P.tail(bQ);return bQ;};O.nonNegative=function(){return C.FailWith("The input must be non-negative.");};N.transposeArray=function(bO){var bP,bQ,bR,bS,bT,bU,bV,bW,bX;bP=N.length(bO);if(bP===0)return[];else{bQ=N.length(N.get(bO,0));for(bR=1,bS=bP-1;bR<=bS;bR++)if(bQ!==N.length(N.get(bO,bR)))C.FailWith("The arrays have different lengths.");bT=new a.Array(bQ);for(bU=0,bV=bQ-1;bU<=bV;bU++){bT[bU]=new a.Array(bP);for(bW=0,bX=bP-1;bW<=bX;bW++)bT[bU][bW]=N.get(N.get(bO,bW),bU);}return bT;}};N.checkBounds=function(bO,bP){if(bP<0||bP>=bO.length)C.FailWith("Index was outside the bounds of the array.");};N.checkBounds2D=function(bO,bP,bQ){if(bP<0||bQ<0||bP>=bO.length||bQ>=(bO.length?bO[0].length:0))throw new _4.New();};N.checkRange=function(bO,bP,bQ){if(bQ<0||bP<0||bO.length<bP+bQ)C.FailWith("Index was outside the bounds of the array.");};N.set=function(bO,bP,bQ){N.checkBounds(bO,bP);bO[bP]=bQ;};N.get=function(bO,bP){N.checkBounds(bO,bP);return bO[bP];};N.sub=function(bO,bP,bQ){N.checkRange(bO,bP,bQ);return bO.slice(bP,bP+bQ);};N.setSub=function(bO,bP,bQ,bR){var bS,bT;for(bS=0,bT=bQ-1;bS<=bT;bS++)N.set(bO,bP+bS,N.get(bR,bS));};N.get2D=function(bO,bP,bQ){N.checkBounds2D(bO,bP,bQ);return bO[bP][bQ];};N.set2D=function(bO,bP,bQ,bR){N.checkBounds2D(bO,bP,bQ);bO[bP][bQ]=bR;};N.zeroCreate2D=function(bO,bP){var bQ;bQ=N.init(bO,function(){return N.create(bP,null);});bQ.dims=2;return bQ;};N.sub2D=function(bO,bP,bQ,bR,bS){var bT,bU,bV,bW,bX,bY,bZ;bT=bR<0?0:bR;bU=bS<0?0:bS;bV=N.zeroCreate2D(bT,bU);for(bW=0,bX=bT-1;bW<=bX;bW++){for(bY=0,bZ=bU-1;bY<=bZ;bY++)N.set2D(bV,bW,bY,N.get2D(bO,bP+bW,bQ+bY));}return bV;};N.setSub2D=function(bO,bP,bQ,bR,bS,bT){var bU,bV,bW,bX;for(bU=0,bV=bR-1;bU<=bV;bU++){for(bW=0,bX=bS-1;bW<=bX;bW++)N.set2D(bO,bP+bU,bQ+bW,N.get2D(bT,bU,bW));}};N.length=function(bO){return bO.dims===2?bO.length*bO.length:bO.length;};b.checkThis=function(bO){return bA.Equals(bO,null)?C.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bO;};N.binarySearch=function(bO,bP,bQ,bR){function bS(bT,bU){var bV,bW;while(true)if(bT>bU)return~bT;else{bV=(bT+bU)/2>>0;bW=bP(N.get(bO,bV));if(bT===bU)return bW===0?bT:bW>0?~(bT+1):~bT;else if(bW<=0)bU=bV;else bT=bV+1;}}if(bQ<0)throw new _7.New("index","Non-negative number required.");else null;if(bR>N.length(bO))throw new _6.New$2("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");else null;if(bR<bQ)throw new _7.New("length","Non-negative number required.");else null;return bS(bQ,bR-1);};N.binarySearchComparer=function(bO){return bO.CompareTo0?function(bP){return bO.CompareTo0(bP);}:function(bP){if(bP.CompareTo0)return-bP.CompareTo0(bO);else throw new _9.New$2("Failed to compare two elements in the array.",new _6.New$2("At least one object must implement IComparable."));};};N.sortInternal=function(bO,bP,bQ,bR,bS){function bT(bV,bW){var bX,bY,bZ,b0;bY=bO[bW];bX=bV-1;for(bZ=bV,b0=bW-1;bZ<=b0;bZ++)if(bR(bO[bZ],bY)<0){bX=bX+1;bS(bX,bZ);}if(bR(bO[bW],bO[bX+1])<0)bS(bX+1,bW);return bX+1;}function bU(bV,bW){var bX;while(true)if(bV<bW){bX=bT(bV,bW);bU(bV,bX-1);bV=bX+1;}else return null;}bU(bP,bP+bQ-1);};N.sortSub=function(bO,bP,bQ,bR){N.sortInternal(bO,bP,bQ,bR,function(bS,bT){var bU;bU=bO[bS];bO[bS]=bO[bT];bO[bT]=bU;});};N.sortByKeys=function(bO,bP,bQ,bR,bS){N.sortInternal(bO,bQ,bR,bS,function(bT,bU){var bV,bW;bV=bO[bT];bO[bT]=bO[bU];bO[bU]=bV;bW=bP[bT];bP[bT]=bP[bU];bP[bU]=bW;});};N.clear=function(bO,bP,bQ){var bR,bS;if(bO==null)throw new _8.New$1("array");else void 0;if(bP<0||bQ<0||bP+bQ>N.length(bO))throw new _4.New();else void 0;for(bR=bP,bS=bP+bQ-1;bR<=bS;bR++)bO[bR]=typeof bO[bR]=="number"?0:null;};N.constrainedCopy=function(bO,bP,bQ,bR,bS){if(bO===bQ&&bR<=bP+bS)N.blit(N.init(bS,function(bT){return N.get(bO,bP+bT);}),0,bQ,bR,bS);else N.blit(bO,bP,bQ,bR,bS);};N.findIndexBound=function(bO,bP,bQ,bR){function bS(bT,bU){while(true)if(bU===bT)return -1;else if(bR(N.get(bO,bU)))return bU;else bU=bU+1;}if(bO==null)throw new _8.New$1("array");else null;if(bR==null)throw new _8.New$1("match");else null;if(bP<0)throw new _7.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bQ<0||bP+bQ>N.length(bO))throw new _7.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;return bS(bP+bQ,bP);};N.findLastIndexBound=function(bO,bP,bQ,bR){function bS(bT){while(true)if(bT<bP)return -1;else if(bR(N.get(bO,bT)))return bT;else bT=bT-1;}if(bO==null)throw new _8.New$1("array");else null;if(bR==null)throw new _8.New$1("match");else null;if(bP<0)throw new _7.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bQ<0||bP+bQ>N.length(bO))throw new _7.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;return bS(bP+bQ-1);};N.reverse=function(bO,bP,bQ){var bR;bR=N.sub(bO,bP,bQ).slice().reverse();N.blit(bR,0,bO,bP,N.length(bR));};N.sum=function(bO){var bP,bQ;bP=0;bQ=0;for(;bQ<bO.length;bQ++)bP+=bO[bQ];return bP;};N.sumBy=function(bO,bP){var bQ,bR;bQ=0;bR=0;for(;bR<bP.length;bR++)bQ+=bO(bP[bR]);return bQ;};N.allPairs=function(bO,bP){var bQ,bR,bS,bT,bU,bV,bW;bQ=bO.length;bR=bP.length;bS=new a.Array(bQ*bR);for(bT=0,bU=bQ-1;bT<=bU;bT++){for(bV=0,bW=bR-1;bV<=bW;bV++)bS[bT*bR+bV]=[bO[bT],bP[bV]];}return bS;};N.blit=function(bO,bP,bQ,bR,bS){var bT,bU;N.checkRange(bO,bP,bS);N.checkRange(bQ,bR,bS);for(bT=0,bU=bS-1;bT<=bU;bT++)bQ[bR+bT]=bO[bP+bT];};N.choose=function(bO,bP){var bQ,bR,bS,bT;bQ=[];for(bR=0,bS=bP.length-1;bR<=bS;bR++){bT=bO(bP[bR]);if(bT==null);else bQ.push(bT.$0);}return bQ;};N.collect=function(bO,bP){return a.Array.prototype.concat.apply([],N.map(bO,bP));};N.concat=function(bO){return a.Array.prototype.concat.apply([],N.ofSeq(bO));};N.create=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bO);for(bR=0,bS=bO-1;bR<=bS;bR++)bQ[bR]=bP;return bQ;};N.exists=function(bO,bP){var bQ,bR,bS,bT;bQ=false;bR=0;bT=N.length(bP);while(!bQ&&bR<bT)if(bO(bP[bR]))bQ=true;else bR=bR+1;return bQ;};N.exists2=function(bO,bP,bQ){var bR,bS,bT,bU;N.checkLength(bP,bQ);bR=false;bS=0;bU=N.length(bP);while(!bR&&bS<bU)if(bO(bP[bS],bQ[bS]))bR=true;else bS=bS+1;return bR;};N.fill=function(bO,bP,bQ,bR){var bS,bT;N.checkRange(bO,bP,bQ);for(bS=bP,bT=bP+bQ-1;bS<=bT;bS++)bO[bS]=bR;};N.filter=function(bO,bP){var bQ,bR,bS;bQ=[];for(bR=0,bS=bP.length-1;bR<=bS;bR++)if(bO(bP[bR]))bQ.push(bP[bR]);return bQ;};N.find=function(bO,bP){var bQ;bQ=N.tryFind(bO,bP);return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};N.findIndex=function(bO,bP){var bQ;bQ=N.tryFindIndex(bO,bP);return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};N.fold=function(bO,bP,bQ){var bR,bS,bT;bR=bP;for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR=bO(bR,bQ[bS]);return bR;};N.fold2=function(bO,bP,bQ,bR){var bS,bT,bU;N.checkLength(bQ,bR);bS=bP;for(bT=0,bU=bQ.length-1;bT<=bU;bT++)bS=bO(bS,bQ[bT],bR[bT]);return bS;};N.foldBack=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bR=bQ;bT=bP.length;for(bU=1,bV=bT;bU<=bV;bU++)bR=bO(bP[bT-bU],bR);return bR;};N.foldBack2=function(bO,bP,bQ,bR){var bS,bT,bU,bV,bW;N.checkLength(bP,bQ);bU=bP.length;bT=bR;for(bV=1,bW=bU;bV<=bW;bV++)bT=bO(bP[bU-bV],bQ[bU-bV],bT);return bT;};N.forall=function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=N.length(bP);while(bQ&&bR<bT)if(bO(bP[bR]))bR=bR+1;else bQ=false;return bQ;};N.forall2=function(bO,bP,bQ){var bR,bS,bT,bU;N.checkLength(bP,bQ);bR=true;bS=0;bU=N.length(bP);while(bR&&bS<bU)if(bO(bP[bS],bQ[bS]))bS=bS+1;else bR=false;return bR;};N.init=function(bO,bP){var bQ,bR,bS;if(bO<0)C.FailWith("Negative size given.");else null;bQ=new a.Array(bO);for(bR=0,bS=bO-1;bR<=bS;bR++)bQ[bR]=bP(bR);return bQ;};N.iter=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bO(bP[bQ]);};N.iter2=function(bO,bP,bQ){var bR,bS;N.checkLength(bP,bQ);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bO(bP[bR],bQ[bR]);};N.iteri=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bO(bQ,bP[bQ]);};N.iteri2=function(bO,bP,bQ){var bR,bS;N.checkLength(bP,bQ);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bO(bR,bP[bR],bQ[bR]);};N.map=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR]=bO(bP[bR]);return bQ;};N.map2=function(bO,bP,bQ){var bR,bS,bT;N.checkLength(bP,bQ);bR=new a.Array(bQ.length);for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR[bS]=bO(bP[bS],bQ[bS]);return bR;};N.mapi=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR]=bO(bR,bP[bR]);return bQ;};N.mapi2=function(bO,bP,bQ){var bR,bS,bT;N.checkLength(bP,bQ);bR=new a.Array(bP.length);for(bS=0,bT=bP.length-1;bS<=bT;bS++)bR[bS]=bO(bS,bP[bS],bQ[bS]);return bR;};N.max=function(bO){var bP,bQ,bR,bS;N.nonEmpty(bO);bP=bO[0];for(bQ=1,bR=bO.length-1;bQ<=bR;bQ++){bS=bO[bQ];if(bA.Compare(bS,bP)===1)bP=bS;}return bP;};N.maxBy=function(bO,bP){var bQ,bR,bS,bT,bU,bV;N.nonEmpty(bP);bQ=bP[0];bR=bO(bQ);for(bS=1,bT=bP.length-1;bS<=bT;bS++){bU=bP[bS];bV=bO(bU);if(bA.Compare(bV,bR)===1){bQ=bU;bR=bV;}}return bQ;};N.min=function(bO){var bP,bQ,bR,bS;N.nonEmpty(bO);bP=bO[0];for(bQ=1,bR=bO.length-1;bQ<=bR;bQ++){bS=bO[bQ];if(bA.Compare(bS,bP)===-1)bP=bS;}return bP;};N.minBy=function(bO,bP){var bQ,bR,bS,bT,bU,bV;N.nonEmpty(bP);bQ=bP[0];bR=bO(bQ);for(bS=1,bT=bP.length-1;bS<=bT;bS++){bU=bP[bS];bV=bO(bU);if(bA.Compare(bV,bR)===-1){bQ=bU;bR=bV;}}return bQ;};N.ofList=function(bO){var bP,bQ;bQ=[];bP=bO;while(!(bP.$==0)){bQ.push(P.head(bP));bP=P.tail(bP);}return bQ;};N.ofSeq=function(bO){var bP,bQ;if(bO instanceof a.Array)return bO.slice();else if(bO instanceof bl)return N.ofList(bO);else{bP=[];bQ=K.Get(bO);try{while(bQ.MoveNext())bP.push(bQ.Current());return bP;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}}};N.partition=function(bO,bP){var bQ,bR,bS,bT;bQ=[];bR=[];for(bS=0,bT=bP.length-1;bS<=bT;bS++)if(bO(bP[bS]))bQ.push(bP[bS]);else bR.push(bP[bS]);return[bQ,bR];};N.permute=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bO(bR)]=bP[bR];return bQ;};N.pick=function(bO,bP){var bQ;bQ=N.tryPick(bO,bP);return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};N.reduce=function(bO,bP){var bQ,bR,bS;N.nonEmpty(bP);bQ=bP[0];for(bR=1,bS=bP.length-1;bR<=bS;bR++)bQ=bO(bQ,bP[bR]);return bQ;};N.reduceBack=function(bO,bP){var bQ,bR,bS,bT,bU;N.nonEmpty(bP);bS=bP.length;bR=bP[bS-1];for(bT=2,bU=bS;bT<=bU;bT++)bR=bO(bP[bS-bT],bR);return bR;};N.scan=function(bO,bP,bQ){var bR,bS,bT;bR=new a.Array(1+bQ.length);bR[0]=bP;for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR[bS+1]=bO(bR[bS],bQ[bS]);return bR;};N.scanBack=function(bO,bP,bQ){var bR,bS,bT,bU;bR=bP.length;bS=new a.Array(1+bR);bS[bR]=bQ;for(bT=0,bU=bR-1;bT<=bU;bT++)bS[bR-bT-1]=bO(bP[bR-bT-1],bS[bR-bT]);return bS;};N.sort=function(bO){return N.map(function(bP){return bP[0];},N.mapi(function(bP,bQ){return[bQ,bP];},bO).sort(bA.Compare));};N.sortBy=function(bO,bP){return N.map(function(bQ){return bQ[0];},N.mapi(function(bQ,bR){return[bR,[bO(bR),bQ]];},bP).sort(function(bQ,bR){return bA.Compare(bQ[1],bR[1]);}));};N.sortInPlace=function(bO){N.mapInPlace(function(bP){return bP[0];},N.mapiInPlace(function(bP,bQ){return[bQ,bP];},bO).sort(bA.Compare));};N.sortInPlaceBy=function(bO,bP){N.mapInPlace(function(bQ){return bQ[0];},N.mapiInPlace(function(bQ,bR){return[bR,[bO(bR),bQ]];},bP).sort(function(bQ,bR){return bA.Compare(bQ[1],bR[1]);}));};N.sortInPlaceWith=function(bO,bP){bP.sort(bO);};N.sortWith=function(bO,bP){return bP.slice().sort(bO);};N.sortByDescending=function(bO,bP){return N.map(function(bQ){return bQ[0];},N.mapi(function(bQ,bR){return[bR,[bO(bR),bQ]];},bP).sort(function(bQ,bR){return-bA.Compare(bQ[1],bR[1]);}));};N.sortDescending=function(bO){return N.map(function(bP){return bP[0];},N.mapi(function(bP,bQ){return[bQ,bP];},bO).sort(function(bP,bQ){return-bA.Compare(bP,bQ);}));};N.average=function(bO){N.nonEmpty(bO);return N.sum(bO)/bO.length;};N.averageBy=function(bO,bP){N.nonEmpty(bP);return N.sumBy(bO,bP)/bP.length;};N.transpose=function(bO){return bO instanceof a.Array?N.transposeArray(bO):N.transposeArray(N.ofSeq(bO));};N.tryFind=function(bO,bP){var bQ,bR;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bO(bP[bR])?bQ={$:1,$0:bP[bR]}:void 0;bR=bR+1;}return bQ;};N.tryFindIndex=function(bO,bP){var bQ,bR;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bO(bP[bR])?bQ={$:1,$0:bR}:void 0;bR=bR+1;}return bQ;};N.tryHead=function(bO){return bO.length===0?null:{$:1,$0:bO[0]};};N.tryItem=function(bO,bP){return bP.length<=bO||bO<0?null:{$:1,$0:bP[bO]};};N.tryLast=function(bO){var bP;bP=bO.length;return bP===0?null:{$:1,$0:bO[bP-1]};};N.tryPick=function(bO,bP){var bQ,bR,bS;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bS=bO(bP[bR]);if(bS!=null&&bS.$==1)bQ=bS;bR=bR+1;}return bQ;};N.unzip=function(bO){var bP,bQ,bR,bS,bT;bP=[];bQ=[];for(bR=0,bS=bO.length-1;bR<=bS;bR++){bT=bO[bR];bP.push(bT[0]);bQ.push(bT[1]);}return[bP,bQ];};N.unzip3=function(bO){var bP,bQ,bR,bS,bT,bU;bP=[];bQ=[];bR=[];for(bS=0,bT=bO.length-1;bS<=bT;bS++){bU=bO[bS];bP.push(bU[0]);bQ.push(bU[1]);bR.push(bU[2]);}return[bP,bQ,bR];};N.zip=function(bO,bP){var bQ,bR,bS;N.checkLength(bO,bP);bQ=N.create(bO.length,null);for(bR=0,bS=bO.length-1;bR<=bS;bR++)bQ[bR]=[bO[bR],bP[bR]];return bQ;};N.zip3=function(bO,bP,bQ){var bR,bS,bT;N.checkLength(bO,bP);N.checkLength(bP,bQ);bR=N.create(bO.length,null);for(bS=0,bT=bO.length-1;bS<=bT;bS++)bR[bS]=[bO[bS],bP[bS],bQ[bS]];return bR;};N.chunkBySize=function(bO,bP){return N.ofSeq(O.chunkBySize(bO,bP));};N.compareWith=function(bO,bP,bQ){return O.compareWith(bO,bP,bQ);};N.distinct=function(bO){return N.ofSeq(O.distinct(bO));};N.distinctBy=function(bO,bP){return N.ofSeq(O.distinctBy(bO,bP));};N.except=function(bO,bP){return N.ofSeq(O.except(bO,bP));};N.findBack=function(bO,bP){var bQ;bQ=N.tryFindBack(bO,bP);return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};N.findIndexBack=function(bO,bP){var bQ;bQ=N.tryFindIndexBack(bO,bP);return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};N.head=function(bO){N.nonEmpty(bO);return bO[0];};N.last=function(bO){N.nonEmpty(bO);return bO[bO.length-1];};N.map3=function(bO,bP,bQ,bR){var bS,bT,bU;N.checkLength(bP,bQ);N.checkLength(bP,bR);bS=new a.Array(bR.length);for(bT=0,bU=bR.length-1;bT<=bU;bT++)bS[bT]=bO(bP[bT],bQ[bT],bR[bT]);return bS;};N.pairwise=function(bO){return N.ofSeq(O.pairwise(bO));};N.replicate=function(bO,bP){return N.create(bO,bP);};N.indexed=function(bO){return N.mapi(function(bP,bQ){return[bP,bQ];},bO);};N.skip=function(bO,bP){return bO<0?O.nonNegative():bO>bP.length?O.insufficient():bP.slice(bO);};N.skipWhile=function(bO,bP){var bQ,bR;bR=bP.length;bQ=0;while(bQ<bR&&bO(bP[bQ]))bQ=bQ+1;return bP.slice(bQ);};N.tail=function(bO){return N.skip(1,bO);};N.take=function(bO,bP){return bO<0?O.nonNegative():bO>bP.length?O.insufficient():bP.slice(0,bO);};N.takeWhile=function(bO,bP){var bQ,bR;bR=bP.length;bQ=0;while(bQ<bR&&bO(bP[bQ]))bQ=bQ+1;return bP.slice(0,bQ);};N.exactlyOne=function(bO){return bO.length===1?bO[0]:C.FailWith("The input does not have precisely one element.");};N.tryExactlyOne=function(bO){return bO.length===1?{$:1,$0:bO[0]}:null;};N.unfold=function(bO,bP){return N.ofSeq(O.unfold(bO,bP));};N.windowed=function(bO,bP){return N.ofSeq(O.windowed(bO,bP));};N.splitAt=function(bO,bP){return[N.take(bO,bP),N.skip(bO,bP)];};N.insertAt=function(bO,bP,bQ){return bO>=0&&N.length(bQ)>bO?bO+1===N.length(bQ)?bQ.concat([bP]):bO===0?[bP].concat(bQ):bm.array(bQ,{$:1,$0:0},{$:1,$0:bO-1}).concat([bP]).concat(bm.array(bQ,{$:1,$0:bO},null)):C.FailWith("Incorrect index");};N.insertManyAt=function(bO,bP,bQ){return bO>=0&&N.length(bQ)>bO?bO+1===N.length(bQ)?bQ.concat(N.ofSeq(bP)):bO===0?N.ofSeq(bP).concat(bQ):bm.array(bQ,{$:1,$0:0},{$:1,$0:bO-1}).concat(N.ofSeq(bP)).concat(bm.array(bQ,{$:1,$0:bO},null)):C.FailWith("Incorrect index");};N.removeAt=function(bO,bP){return bO>=0&&N.length(bP)>bO?bO+1===N.length(bP)?bm.array(bP,{$:1,$0:0},{$:1,$0:bO-1}):bO===0?N.tail(bP):bm.array(bP,{$:1,$0:0},{$:1,$0:bO-1}).concat(bm.array(bP,{$:1,$0:bO+1},null)):C.FailWith("Incorrect index");};N.removeManyAt=function(bO,bP,bQ){return bO+bP>=0&&N.length(bQ)>bO+bP?bO+bP===N.length(bQ)?bm.array(bQ,{$:1,$0:0},{$:1,$0:bO-1}):bO===0?bm.array(bQ,{$:1,$0:bP},null):bm.array(bQ,{$:1,$0:0},{$:1,$0:bO-1}).concat(bm.array(bQ,{$:1,$0:bO+bP},null)):C.FailWith("Incorrect index");};N.updateAt=function(bO,bP,bQ){return bO>=0&&N.length(bQ)>bO?bO+1===N.length(bQ)?bm.array(bQ,{$:1,$0:0},{$:1,$0:bO-1}).concat([bP]):bO===0?[bP].concat(N.tail(bQ)):bm.array(bQ,{$:1,$0:0},{$:1,$0:bO-1}).concat([bP]).concat(bm.array(bQ,{$:1,$0:bO+1},null)):C.FailWith("Incorrect index");};N.nonEmpty=function(bO){if(bO.length===0)C.FailWith("The input array was empty.");};N.checkLength=function(bO,bP){if(bO.length!==bP.length)C.FailWith("The arrays have different lengths.");};Q.init=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bR=N.zeroCreate2D(bO,bP);for(bS=0,bT=bO-1;bS<=bT;bS++){for(bU=0,bV=bP-1;bU<=bV;bU++)N.set2D(bR,bS,bU,bQ(bS,bU));}return bR;};Q.iter=function(bO,bP){var bQ,bR,bS,bT,bU,bV;bQ=bP.length;bR=bP.length?bP[0].length:0;for(bS=0,bT=bQ-1;bS<=bT;bS++){for(bU=0,bV=bR-1;bU<=bV;bU++)bO(N.get2D(bP,bS,bU));}};Q.iteri=function(bO,bP){var bQ,bR,bS,bT,bU,bV;bQ=bP.length;bR=bP.length?bP[0].length:0;for(bS=0,bT=bQ-1;bS<=bT;bS++){for(bU=0,bV=bR-1;bU<=bV;bU++)bO(bS,bU,N.get2D(bP,bS,bU));}};Q.map=function(bO,bP){return Q.init(bP.length,bP.length?bP[0].length:0,function(bQ,bR){return bO(N.get2D(bP,bQ,bR));});};Q.mapi=function(bO,bP){return Q.init(bP.length,bP.length?bP[0].length:0,function(bQ,bR){return bO(bQ,bR,N.get2D(bP,bQ,bR));});};Q.copy=function(bO){return Q.init(bO.length,bO.length?bO[0].length:0,function(bP,bQ){return N.get2D(bO,bP,bQ);});};R=b.CancellationTokenSource=bH.Class({CancelAfter:function(bO){var bP,bQ;bP=this;if(!this.c){bQ=this.pending;bQ==null?void 0:a.clearTimeout(bQ.$0);this.pending={$:1,$0:a.setTimeout(function(){bP.Cancel$1();},bO)};}},Cancel:function(bO){if(!bO)this.Cancel$1();else if(!this.c){this.c=true;N.iter(function(bP){bP();},this.r);}},Cancel$1:function(){var bO;if(!this.c){this.c=true;bO=N.choose(function(bP){try{bP();return null;}catch(bQ){return{$:1,$0:bQ};}},this.r);if(N.length(bO)>0)throw new _.New$3(bO);else void 0;}}},k,R);R.CreateLinkedTokenSource=function(bO,bP){return R.CreateLinkedTokenSource$1([bO,bP]);};R.CreateLinkedTokenSource$1=function(bO){var bP;bP=new R.New();N.iter(function(bQ){function bR(bS){return bP.Cancel$1();}F.Register(bQ,function(){bR();});},bO);return bP;};R.New=bH.Ctor(function(){k.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},R);S.ToBinaryStr=function(bO){return"0b"+bu.concat("",N.map(S.ToBin,bO.slice().reverse()));};S.ToBin=function(bO){var bP;function bQ(bR,bS){return function(bT){return bR/C.toInt(bN.pow(2,7-bT))>>0===1?[bR%C.toInt(bN.pow(2,7-bT)),bS+"1"]:[bR,bS+"0"];};}return(bP=P.ofSeq(C.range(0,7)),O.fold(function(bR,bS){return(function(bT){return bQ(bT[0],bT[1]);}(bR))(bS);},[C.toInt(bO),""],bP))[1];};T.IsWhiteSpace=function(bO){return bO.match(new a.RegExp("\\s"))!==null;};T.Parse=function(bO){return bO.length===1?bO:C.FailWith("String must be exactly one character long.");};T.IsUpper=function(bO){return bO>="A"&&bO<="Z";};T.IsLower=function(bO){return bO>="a"&&bO<="z";};T.IsLetterOrDigit=function(bO){return T.IsLetter(bO)||T.IsDigit(bO);};T.IsLetter=function(bO){return bO>="A"&&bO<="Z"||bO>="a"&&bO<="z";};T.IsDigit=function(bO){return bO>="0"&&bO<="9";};T.IsControl=function(bO){return bO>="\u0000"&&bO<="\u001f"||bO>="\u0080"&&bO<="\u009f";};T.GetNumericValue=function(bO){return bO>="0"&&bO<="9"?bO.charCodeAt()-"0".charCodeAt():-1;};U.observer=function(bO){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bO};};V.LongTime=function(bO){return(new bL(bO)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};V.ShortTime=function(bO){return(new bL(bO)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};V.LongDate=function(bO){return(new bL(bO)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};V.Parse=function(bO){var bP;bP=V.TryParse(bO);return bP!=null&&bP.$==1?bP.$0:C.FailWith("Failed to parse date string.");};V.TryParse=function(bO){var bP;bP=bL.parse(bO);return a.isNaN(bP)?null:{$:1,$0:bP};};V.AddMonths=function(bO,bP){var bQ;bQ=new bL(bO);return(new bL(bQ.getFullYear(),bQ.getMonth()+bP,bQ.getDate(),bQ.getHours(),bQ.getMinutes(),bQ.getSeconds(),bQ.getMilliseconds())).getTime();};V.AddYears=function(bO,bP){var bQ;bQ=new bL(bO);return(new bL(bQ.getFullYear()+bP,bQ.getMonth(),bQ.getDate(),bQ.getHours(),bQ.getMinutes(),bQ.getSeconds(),bQ.getMilliseconds())).getTime();};V.TimePortion=function(bO){var bP;bP=new bL(bO);return(((24*0+bP.getHours())*60+bP.getMinutes())*60+bP.getSeconds())*1000+bP.getMilliseconds();};V.DatePortion=function(bO){var bP;bP=new bL(bO);return(new bL(bP.getFullYear(),bP.getMonth(),bP.getDate())).getTime();};W.get_Now=function(){var bO;bO=new bL();return{d:bO.getTime(),o:-bO.getTimezoneOffset()};};W.get_DateTime=function(bO){return bO.d;};X.InvocationList=function(bO){return bO.$Invokes||[bO];};X.RemoveAll=function(bO,bP){var bQ;bQ=X.InvocationList(bO);if(N.length(X.InvocationList(bP))>1)C.FailWith("TODO: Remove multicast delegates");return bH.CreateDelegate(N.filter(function(bR){return!bA.Equals(bR,bP);},bQ));};X.Remove=function(bO,bP){var bQ,bR,bS,bT,bU,bV,bW;bS=X.InvocationList(bO);if(N.length(X.InvocationList(bP))>1)C.FailWith("TODO: Remove multicast delegates");bT=[];bR=false;for(bU=N.length(bS)-1,bV=0;bU>=bV;bU--){bW=N.get(bS,bU);if(!bR&&bH.DelegateEqual(bW,bP))bR=true;else bT.unshift(bW);}return bH.CreateDelegate(bT);};X.DelegateTarget=function(bO){var bP;return!bO?null:"$Target"in bO?bO.$Target:"$Invokes"in bO?(bP=bO.$Invokes,(N.get(bP,N.length(bP)-1))[1]):null;};Y.getHashCode=function(bO,bP){return bO.CGetHashCode(bP);};Y.equals=function(bO){return function(bP,bQ){return bO.CEquals(bP,bQ);};};Y.alreadyAdded=function(){throw new _6.New$2("An item with the same key has already been added.");};Y.notPresent=function(){throw new bd.New();};Z=u.KeyCollection=bH.Class({GetEnumerator:function(){return K.Get(O.map(function(bO){return bO.K;},this.d));},IsReadOnly:function(){return true;},Count:function(){return this.d.count;},Contains:function(bO){return this.d.ContainsKey(bO);},CopyTo:function(bO,bP){K.ArrayCopyTo(N.ofSeq(this),bO,bP);}},k,Z);Z.New=bH.Ctor(function(bO){k.New.call(this);this.d=bO;},Z);_0=u.ValueCollection=bH.Class({GetEnumerator:function(){return K.Get(O.map(function(bO){return bO.V;},this.d));},IsReadOnly:function(){return true;},Count:function(){return this.d.count;},Contains:function(bO){return this.d.ContainsValue(bO);},CopyTo:function(bO,bP){K.ArrayCopyTo(N.ofSeq(this),bO,bP);}},k,_0);_0.New=bH.Ctor(function(bO){k.New.call(this);this.d=bO;},_0);_1=u.Dictionary=bH.Class({Keys:function(){return new Z.New(this);},Values:function(){return new _0.New(this);},RemoveKey:function(bO){return this.remove(bO);},GetEnumerator:function(){return K.Get0(N.concat(d.GetFieldValues(this.data)));},set_Item:function(bO,bP){this.set(bO,bP);},Item:function(bO){return this.get(bO);},DAdd:function(bO,bP){this.add(bO,bP);},remove:function(bO){var bP,bQ,bR,bS;bP=this;bQ=this.hash(bO);bR=this.data[bQ];return bR==null?false:(bS=N.filter(function(bT){return!bP.equals.apply(null,[(C.KeyValue(bT))[0],bO]);},bR),N.length(bS)<bR.length&&(this.count=this.count-1,this.data[bQ]=bS,true));},add:function(bO,bP){var bQ,bR,bS;bQ=this;bR=this.hash(bO);bS=this.data[bR];if(bS==null){this.count=this.count+1;this.data[bR]=new a.Array({K:bO,V:bP});}else{N.exists(function(bT){return bQ.equals.apply(null,[(C.KeyValue(bT))[0],bO]);},bS)?Y.alreadyAdded():void 0;this.count=this.count+1;bS.push({K:bO,V:bP});}},set:function(bO,bP){var bQ,bR,bS,bT;bQ=this;bR=this.hash(bO);bS=this.data[bR];if(bS==null){this.count=this.count+1;this.data[bR]=new a.Array({K:bO,V:bP});}else{bT=N.tryFindIndex(function(bU){return bQ.equals.apply(null,[(C.KeyValue(bU))[0],bO]);},bS);bT==null?(this.count=this.count+1,bS.push({K:bO,V:bP})):bS[bT.$0]={K:bO,V:bP};}},get:function(bO){var bP,bQ;bP=this;bQ=this.data[this.hash(bO)];return bQ==null?Y.notPresent():N.pick(function(bR){var bS;bS=C.KeyValue(bR);return bP.equals.apply(null,[bS[0],bO])?{$:1,$0:bS[1]}:null;},bQ);},TryGetValue:function(bO,bP){var bQ,bR,bS;bQ=this;bR=this.data[this.hash(bO)];return bR==null?false:(bS=N.tryPick(function(bT){var bU;bU=C.KeyValue(bT);return bQ.equals.apply(null,[bU[0],bO])?{$:1,$0:bU[1]}:null;},bR),bS!=null&&bS.$==1&&(bP.set(bS.$0),true));},ContainsValue:function(bO){return O.exists(function(bP){return bA.Equals((C.KeyValue(bP))[1],bO);},this);},ContainsKey:function(bO){var bP,bQ;bP=this;bQ=this.data[this.hash(bO)];return bQ==null?false:N.exists(function(bR){return bP.equals.apply(null,[(C.KeyValue(bR))[0],bO]);},bQ);},Clear:function(){this.data=[];this.count=0;},IsFixedSize:function(){return false;},Remove:function(bO){var bP,bQ;bP=(bQ=void 0,[this.TryGetValue(bO.K,{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);return bP[0]&&(bA.Equals(bP[1],bO.V)&&this.RemoveKey(bO.K));},CopyTo:function(bO,bP){K.ArrayCopyTo(N.ofSeq(this),bO,bP);},Contains:function(bO){var bP,bQ;bP=(bQ=void 0,[this.TryGetValue(bO.K,{get:function(){return bQ;},set:function(bR){bQ=bR;}}),bQ]);return bP[0]&&bA.Equals(bP[1],bO.V);},Add:function(bO){this.DAdd(bO.K,bO.V);},Count:function(){return this.count;},IsReadOnly:function(){return false;}},k,_1);_1.New=bH.Ctor(function(bO,bP){_1.New$6.call(this,bO,Y.equals(bP),function(bQ){return Y.getHashCode(bP,bQ);});},_1);_1.New$1=bH.Ctor(function(bO){_1.New$6.call(this,bO,bA.Equals,bA.Hash);},_1);_1.New$2=bH.Ctor(function(bO,bP){_1.New$3.call(this,bP);},_1);_1.New$3=bH.Ctor(function(bO){_1.New$6.call(this,[],Y.equals(bO),function(bP){return Y.getHashCode(bO,bP);});},_1);_1.New$4=bH.Ctor(function(bO){_1.New$5.call(this);},_1);_1.New$5=bH.Ctor(function(){_1.New$6.call(this,[],bA.Equals,bA.Hash);},_1);_1.New$6=bH.Ctor(function(bO,bP,bQ){var bR,bS;k.New.call(this);this.equals=bP;this.hash=bQ;this.count=0;this.data=[];bR=K.Get(bO);try{while(bR.MoveNext()){bS=bR.Current();this.set(bS.K,bS.V);}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}},_1);_2.withInner=function(bO,bP){var bQ;bQ=new e(bO);bQ.inner=bP;return bQ;};_3=b.MatchFailureException=bH.Class({},e,_3);_3.New=bH.Ctor(function(bO,bP,bQ){this.message=bO+" at "+bK(bP)+":"+bK(bQ);a.Object.setPrototypeOf(this,_3.prototype);},_3);_4=b.IndexOutOfRangeException=bH.Class({},e,_4);_4.New=bH.Ctor(function(){_4.New$1.call(this,"Index was outside the bounds of the array.");},_4);_4.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,_4.prototype);},_4);_5=b.OperationCanceledException=bH.Class({},e,_5);_5.New=bH.Ctor(function(bO){_5.New$1.call(this,"The operation was canceled.",null,bO);},_5);_5.New$1=bH.Ctor(function(bO,bP,bQ){this.message=bO;this.inner=bP;a.Object.setPrototypeOf(this,_5.prototype);this.ct=bQ;},_5);_6=b.ArgumentException=bH.Class({},e,_6);_6.New=bH.Ctor(function(bO,bP){_6.New$2.call(this,bP+"\nParameter name: "+bO);},_6);_6.New$1=bH.Ctor(function(){_6.New$2.call(this,"Value does not fall within the expected range.");},_6);_6.New$2=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,_6.prototype);},_6);_7=b.ArgumentOutOfRangeException=bH.Class({},e,_7);_7.New=bH.Ctor(function(bO,bP){this.message=bP+"\nParameter name: "+bO;a.Object.setPrototypeOf(this,_7.prototype);},_7);_7.New$1=bH.Ctor(function(bO){_7.New.call(this,bO,"Specified argument was out of the range of valid values.");},_7);_7.New$2=bH.Ctor(function(){this.message="Specified argument was out of the range of valid values.";a.Object.setPrototypeOf(this,_7.prototype);},_7);_8=b.ArgumentNullException=bH.Class({},e,_8);_8.New=bH.Ctor(function(bO,bP){this.message=bP+"\nParameter name: "+bO;a.Object.setPrototypeOf(this,_8.prototype);},_8);_8.New$1=bH.Ctor(function(bO){_8.New.call(this,bO,"Value cannot be null.");},_8);_8.New$2=bH.Ctor(function(){this.message="Value cannot be null.";a.Object.setPrototypeOf(this,_8.prototype);},_8);_9=b.InvalidOperationException=bH.Class({},e,_9);_9.New=bH.Ctor(function(bO){_9.New$2.call(this,bO,null);},_9);_9.New$1=bH.Ctor(function(){_9.New.call(this,"Operation is not valid due to the current state of the object.");},_9);_9.New$2=bH.Ctor(function(bO,bP){this.message=bO;this.inner=bP;a.Object.setPrototypeOf(this,_9.prototype);},_9);_=b.AggregateException=bH.Class({},e,_);_.New=bH.Ctor(function(bO,bP){_.New$4.call(this,bO,[bP]);},_);_.New$1=bH.Ctor(function(bO,bP){_.New$4.call(this,bO,N.ofSeq(bP));},_);_.New$2=bH.Ctor(function(bO){_.New$4.call(this,"One or more errors occurred.",N.ofSeq(bO));},_);_.New$3=bH.Ctor(function(bO){_.New$4.call(this,"One or more errors occurred.",bO);},_);_.New$4=bH.Ctor(function(bO,bP){this.message=bO;a.Object.setPrototypeOf(this,_.prototype);this.innerExceptions=bP;},_);$=b.TimeoutException=bH.Class({},e,$);$.New=bH.Ctor(function(){$.New$1.call(this,"The operation has timed out.");},$);$.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,$.prototype);},$);ba=b.FormatException=bH.Class({},e,ba);ba.New=bH.Ctor(function(){ba.New$1.call(this,"One of the identified items was in an invalid format.");},ba);ba.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,ba.prototype);},ba);bb=b.OverflowException=bH.Class({},e,bb);bb.New=bH.Ctor(function(){bb.New$1.call(this,"Arithmetic operation resulted in an overflow.");},bb);bb.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,bb.prototype);},bb);bc=b.TaskCanceledException=bH.Class({},e,bc);bc.New=bH.Ctor(function(){bc.New$1.call(this,"A task was canceled.");},bc);bc.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,bc.prototype);},bc);bd=b.KeyNotFoundException=bH.Class({},e,bd);bd.New=bH.Ctor(function(){bd.New$1.call(this,"The given key was not present in the dictionary.");},bd);bd.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,bd.prototype);},bd);N.create2D=function(bO){var bP;bP=N.ofSeq(O.map(N.ofSeq,bO));bP.dims=2;return bP;};bf.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bO){var bP,bQ;bP=bN.random()*16|0;bQ=bO=="x"?bP:bP&3|8;return bQ.toString(16);});};bf.TryParseExact=function(bO,bP,bQ){try{bQ.set(bf.ParseExact(bO,bP));return true;}catch(bR){return false;}};bf.TryParse=function(bO,bP){try{bP.set(bf.Parse(bO));return true;}catch(bQ){return false;}};bf.ParseExact=function(bO,bP){var bQ,bR,bS,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3;function bT(b4){var b5,b6,b7,b8;for(b5=0,b6=35;b5<=b6;b5++){if(b5===8||(b5===13||(b5===18||b5===23)))b4[b5]!=="-"?bf.ShapeError():void 0;else{b8=b4[b5];!("0"<=b8&&b8<="9"||"a"<=b8&&b8<="f")?bf.ShapeError():void 0;}}return b4;}bU=bP.toUpperCase();if(bU=="N"){bV=bu.Trim(bO).toLowerCase();if(bV.length!==32)bf.ShapeError();for(bW=0,bX=31;bW<=bX;bW++){bY=bV[bW];if(!("0"<=bY&&bY<="9"||"a"<=bY&&bY<="f"))bf.ShapeError();}return bu.Substring(bV,0,8)+"-"+bu.Substring(bV,8,4)+"-"+bu.Substring(bV,12,4)+"-"+bu.Substring(bV,16,4)+"-"+bV.substring(20);}else if(bU=="D"){bQ=bu.Trim(bO).toLowerCase();bQ.length!==36?bf.ShapeError():void 0;return bT(bQ);}else if(bU=="B"){bR=bu.Trim(bO).toLowerCase();bR.length!==38||bR[0]!=="{"||bR[17]!=="}"?bf.ShapeError():void 0;return bT(bu.Substring(bR,1,36));}else if(bU=="P"){bS=bu.Trim(bO).toLowerCase();bS.length!==38||bS[0]!=="("||bS[17]!==")"?bf.ShapeError():void 0;return bT(bu.Substring(bS,1,36));}else if(bU=="X"){bZ=bu.Trim(bO).toLowerCase();if(bZ.length!==68)bf.ShapeError();for(b0=0,b1=67;b0<=b1;b0++){switch(b0){case 26:case 0:if(bZ[b0]!=="{")bf.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(bZ[b0]!=="0")bf.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(bZ[b0]!=="x")bf.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(bZ[b0]!==",")bf.ShapeError();break;case 67:case 66:if(bZ[b0]!=="{")bf.ShapeError();break;default:b3=bZ[b0];if(!("0"<=b3&&b3<="9"||"a"<=b3&&b3<="f"))bf.ShapeError();break;}}return bu.Substring(bZ,3,8)+"-"+bu.Substring(bZ,14,4)+"-"+bu.Substring(bZ,21,4)+"-"+bu.Substring(bZ,29,2)+bu.Substring(bZ,34,2)+"-"+bu.Substring(bZ,39,2)+bu.Substring(bZ,44,2)+bu.Substring(bZ,49,2)+bu.Substring(bZ,54,2)+bu.Substring(bZ,59,2)+bu.Substring(bZ,64,2);}else return bf.FormatError();};bf.Parse=function(bO){var bP,bQ,bR;try{return bf.ParseExact(bO,"D");}catch(bS){try{bP=bf.ParseExact(bO,"B");}catch(bT){try{bQ=bf.ParseExact(bO,"P");}catch(bU){try{bR=bf.ParseExact(bO,"N");}catch(bV){bR=bf.ParseExact(bO,"X");}bQ=bR;}bP=bQ;}return bP;}};bf.ToString=function(bO,bP){var bQ;bQ=bP.toUpperCase();return bQ=="N"?bu.Replace(bO,"-",""):bQ=="D"?bO:bQ=="B"?"{"+bO+"}":bQ=="P"?"("+bO+")":bQ=="X"?"{0x"+bu.Substring(bO,0,8)+",0x"+bu.Substring(bO,9,4)+",0x"+bu.Substring(bO,14,4)+",{0x"+bu.Substring(bO,19,2)+",0x"+bu.Substring(bO,21,2)+",0x"+bu.Substring(bO,24,2)+",0x"+bu.Substring(bO,26,2)+",0x"+bu.Substring(bO,28,2)+",0x"+bu.Substring(bO,30,2)+",0x"+bu.Substring(bO,32,2)+",0x"+bu.Substring(bO,34,2)+"}}":bf.FormatError();};bf.ParseError=function(){throw new ba.New$1("Unrecognized Guid format.");};bf.ShapeError=function(){throw new ba.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bf.HexaError=function(){throw new ba.New$1("Hexadecimal Guid printing not implemented by WebSharper.");};bf.FormatError=function(){throw new ba.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bg.concat=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push.apply(bP,bO[bR]);return bP;};bh=u.HashSet=bH.Class({GetEnumerator:function(){return K.Get(bg.concat(this.data));},Count:function(){return this.count;},CopyTo:function(bO,bP){var bQ,bR,bS;bQ=bg.concat(this.data);for(bR=0,bS=bQ.length-1;bR<=bS;bR++)N.set(bO,bR+bP,bQ[bR]);},SAdd:function(bO){return this.add(bO);},add:function(bO){var bP,bQ;bP=this.hash(bO);bQ=this.data[bP];return bQ==null?(this.data[bP]=[bO],this.count=this.count+1,true):this.arrContains(bO,bQ)?false:(bQ.push(bO),this.count=this.count+1,true);},arrRemove:function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=bP.length;while(bQ&&bR<bT)if(this.equals.apply(null,[bP[bR],bO])){bP.splice.apply(bP,[bR,1]);bQ=false;}else bR=bR+1;return!bQ;},arrContains:function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=bP.length;while(bQ&&bR<bT)if(this.equals.apply(null,[bP[bR],bO]))bQ=false;else bR=bR+1;return!bQ;},UnionWith:function(bO){var bP;bP=K.Get(bO);try{while(bP.MoveNext())this.SAdd(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},SymmetricExceptWith:function(bO){var bP,bQ;bP=K.Get(bO);try{while(bP.MoveNext()){bQ=bP.Current();if(this.Contains(bQ))this.Remove(bQ);else this.SAdd(bQ);}}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},SetEquals:function(bO){var bP;bP=new bh.New$4(bO,this.equals,this.hash);return this.Count()===bP.Count()&&this.IsSupersetOf(bP);},RemoveWhere:function(bO){var bP,bQ,bR,bS,bT;bQ=bg.concat(this.data);bP=0;for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=bQ[bR];if(bO(bT))this.Remove(bT)?bP=bP+1:void 0;}return bP;},Remove:function(bO){var bP;bP=this.data[this.hash(bO)];return bP==null?false:this.arrRemove(bO,bP)&&(this.count=this.count-1,true);},Overlaps:function(bO){var bP;bP=this;return O.exists(function(bQ){return bP.Contains(bQ);},bO);},IsSupersetOf:function(bO){var bP;bP=this;return O.forall(function(bQ){return bP.Contains(bQ);},bO);},IsSubsetOf:function(bO){var bP;bP=new bh.New$4(bO,this.equals,this.hash);return N.forall(function(bQ){return bP.Contains(bQ);},bg.concat(this.data));},IsProperSupersetOf:function(bO){var bP;bP=N.ofSeq(bO);return this.count>N.length(bP)&&this.IsSupersetOf(bP);},IsProperSubsetOf:function(bO){var bP;bP=N.ofSeq(bO);return this.count<N.length(bP)&&this.IsSubsetOf(bP);},IntersectWith:function(bO){var bP,bQ,bR,bS,bT;bP=new bh.New$4(bO,this.equals,this.hash);bQ=bg.concat(this.data);for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=bQ[bR];if(!bP.Contains(bT))this.Remove(bT);}},ExceptWith:function(bO){var bP;bP=K.Get(bO);try{while(bP.MoveNext())this.Remove(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},CopyTo$1:function(bO,bP,bQ){var bR,bS,bT,bU;bR=0;bS=bg.concat(this.data);for(bT=0,bU=bQ-1;bT<=bU;bT++)N.set(bO,bT+bP,bS[bT]);},Contains:function(bO){var bP;bP=this.data[this.hash(bO)];return bP==null?false:this.arrContains(bO,bP);},Clear:function(){this.data=[];this.count=0;},Add:function(bO){this.SAdd(bO);},IsReadOnly:function(){return false;}},k,bh);bh.New=bH.Ctor(function(bO,bP){bh.New$4.call(this,bO,Y.equals(bP),function(bQ){return Y.getHashCode(bP,bQ);});},bh);bh.New$1=bH.Ctor(function(bO){bh.New$4.call(this,[],Y.equals(bO),function(bP){return Y.getHashCode(bO,bP);});},bh);bh.New$2=bH.Ctor(function(bO){bh.New$4.call(this,bO,bA.Equals,bA.Hash);},bh);bh.New$3=bH.Ctor(function(){bh.New$4.call(this,[],bA.Equals,bA.Hash);},bh);bh.New$4=bH.Ctor(function(bO,bP,bQ){var bR;k.New.call(this);this.equals=bP;this.hash=bQ;this.data=[];this.count=0;bR=K.Get(bO);try{while(bR.MoveNext())this.add(bR.Current());}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}},bh);bj.New=function(bO,bP,bQ){return{c:bO,v:bP,f:bQ};};bk.Force=function(bO){return bO.f();};bk.CreateFromValue=function(bO){return bj.New(true,bO,bk.cachedLazy);};bk.Create=function(bO){return bj.New(false,bO,bk.forceLazy);};bk.forceLazy=function(){var bO;bO=this.v();this.c=true;this.v=bO;this.f=bk.cachedLazy;return bO;};bk.cachedLazy=function(){return this.v;};bl=P.T=bH.Class({GetSlice:function(bO,bP){var bQ,bR,bS;try{return bO!=null&&bO.$==1?bP!=null&&bP.$==1?(bQ=bO.$0,bR=bP.$0,bR<0?bl.Empty:P.ofSeq(O.take(bR-bQ+1,P.skip(bQ,this)))):P.skip(bO.$0,this):bP!=null&&bP.$==1?(bS=bP.$0,bS<0?bl.Empty:P.ofSeq(O.take(bS+1,this))):this;}catch(bT){return bl.Empty;}},get_Item:function(bO){return O.nth(bO,this);},get_Length:function(){return P.length(this);},GetEnumerator:function(){return new L.New(this,null,function(bO){var bP;bP=bO.s;return bP.$==0?false:(bO.c=bP.$0,bO.s=bP.$1,true);},void 0);}},null,bl);bl.Empty=new bl({$:0});P.allPairs=function(bO,bP){return P.ofArray(N.allPairs(N.ofList(bO),N.ofList(bP)));};P.append=function(bO,bP){var bQ,bR,bS,bT,bU;if(bO.$==0)return bP;else if(bP.$==0)return bO;else{bT=new bl({$:1});bQ=bT;bR=bO;bS=true;while(bS){bQ.$0=bR.$0;bR=bR.$1;if(bR.$==0)bS=false;else bQ=(bU=new bl({$:1}),bQ.$1=bU,bU);}bQ.$1=bP;return bT;}};P.choose=function(bO,bP){return P.ofSeq(O.choose(bO,bP));};P.collect=function(bO,bP){return P.ofSeq(O.collect(bO,bP));};P.concat=function(bO){return P.ofSeq(O.concat(bO));};P.exists=function(bO,bP){var bQ,bR;bQ=false;bR=bP;while(!bQ&&bR.$==1){bQ=bO(bR.$0);bR=bR.$1;}return bQ;};P.exists2=function(bO,bP,bQ){var bR,bS,bT;bR=false;bS=bP;bT=bQ;while(!bR&&bS.$==1&&bT.$==1){bR=bO(bS.$0,bT.$0);bS=bS.$1;bT=bT.$1;}if(!bR&&(bS.$==1||bT.$==1))P.badLengths();return bR;};P.filter=function(bO,bP){var bQ,bR,bS,bT,bU,bV;if(bP.$==0)return bP;else{bQ=bl.Empty;bR=bQ;bS=bP;bT=true;while(bT){if(bO(bS.$0)){bQ.$==0?(bQ=new bl({$:1}),bR=bQ):bR=(bU=new bl({$:1}),bR.$1=bU,bU);bV=bS.$0;bR.$=1;bR.$0=bV;}bS=bS.$1;if(bS.$==0)bT=false;}if(!(bQ.$==0))bR.$1=bl.Empty;return bQ;}};P.fold2=function(bO,bP,bQ,bR){return N.fold2(bO,bP,N.ofList(bQ),N.ofList(bR));};P.foldBack=function(bO,bP,bQ){return N.foldBack(bO,N.ofList(bP),bQ);};P.foldBack2=function(bO,bP,bQ,bR){return N.foldBack2(bO,N.ofList(bP),N.ofList(bQ),bR);};P.forAll=function(bO,bP){var bQ,bR;bQ=true;bR=bP;while(bQ&&bR.$==1){bQ=bO(bR.$0);bR=bR.$1;}return bQ;};P.forall2=function(bO,bP,bQ){var bR,bS,bT;bR=true;bS=bP;bT=bQ;while(bR&&bS.$==1&&bT.$==1){bR=bO(bS.$0,bT.$0);bS=bS.$1;bT=bT.$1;}if(bR&&(bS.$==1||bT.$==1))P.badLengths();return bR;};P.head=function(bO){return bO.$==1?bO.$0:P.listEmpty();};P.init=function(bO,bP){return P.ofArray(N.init(bO,bP));};P.iter=function(bO,bP){var bQ;bQ=bP;while(bQ.$==1){bO(P.head(bQ));bQ=P.tail(bQ);}};P.iter2=function(bO,bP,bQ){var bR,bS;bR=bP;bS=bQ;while(bR.$==1){bS.$==0?P.badLengths():void 0;bO(P.head(bR),P.head(bS));bR=P.tail(bR);bS=P.tail(bS);}if(bS.$==1)P.badLengths();};P.iteri=function(bO,bP){var bQ,bR;bQ=bP;bR=0;while(bQ.$==1){bO(bR,P.head(bQ));bQ=P.tail(bQ);bR=bR+1;}};P.iteri2=function(bO,bP,bQ){var bR,bS,bT;bR=bP;bS=bQ;bT=0;while(bR.$==1){bS.$==0?P.badLengths():void 0;bO(bT,P.head(bR),P.head(bS));bR=P.tail(bR);bS=P.tail(bS);bT=bT+1;}if(bS.$==1)P.badLengths();};P.length=function(bO){var bP,bQ;bP=bO;bQ=0;while(bP.$==1){bP=P.tail(bP);bQ=bQ+1;}return bQ;};P.map=function(bO,bP){var bQ,bR,bS,bT,bU;if(bP.$==0)return bP;else{bT=new bl({$:1});bQ=bT;bR=bP;bS=true;while(bS){bQ.$0=bO(bR.$0);bR=bR.$1;if(bR.$==0)bS=false;else bQ=(bU=new bl({$:1}),bQ.$1=bU,bU);}bQ.$1=bl.Empty;return bT;}};P.map2=function(bO,bP,bQ){var bR,bS,bT,bU,bV,bW;bR=bP.$==1&&bQ.$==1;if(!bR)return bP.$==1||bQ.$==1?P.badLengths():bP;else{bV=new bl({$:1});bS=bV;bT=bP;bU=bQ;while(bR){bS.$0=bO(bT.$0,bU.$0);bT=bT.$1;bU=bU.$1;if(bT.$==1&&bU.$==1)bS=(bW=new bl({$:1}),bS.$1=bW,bW);else bR=false;}if(bT.$==1||bU.$==1)P.badLengths();bS.$1=bl.Empty;return bV;}};P.map3=function(bO,bP,bQ,bR){var bS,bT,bU,bV,bW,bX,bY;bS=bP.$==1&&bQ.$==1&&bR.$==1;if(!bS)return bP.$==1||bQ.$==1||bR.$==1?P.badLengths():bP;else{bX=new bl({$:1});bT=bX;bU=bP;bV=bQ;bW=bR;while(bS){bT.$0=bO(bU.$0,bV.$0,bW.$0);bU=bU.$1;bV=bV.$1;bW=bW.$1;if(bU.$==1&&bV.$==1&&bW.$==1)bT=(bY=new bl({$:1}),bT.$1=bY,bY);else bS=false;}if(bU.$==1||bV.$==1||bW.$==1)P.badLengths();bT.$1=bl.Empty;return bX;}};P.mapi=function(bO,bP){var bQ,bR,bS,bT,bU,bV;if(bP.$==0)return bP;else{bU=new bl({$:1});bQ=bU;bR=bP;bS=0;bT=true;while(bT){bQ.$0=bO(bS,bR.$0);bR=bR.$1;if(bR.$==0)bT=false;else{bQ=(bV=new bl({$:1}),bQ.$1=bV,bV);bS=bS+1;}}bQ.$1=bl.Empty;return bU;}};P.mapi2=function(bO,bP,bQ){var bR,bS,bT,bU,bV,bW,bX;bR=bP.$==1&&bQ.$==1;if(!bR)return bP.$==1||bQ.$==1?P.badLengths():bP;else{bW=new bl({$:1});bS=bW;bT=bP;bU=bQ;bV=0;while(bR){bS.$0=bO(bV,bT.$0,bU.$0);bT=bT.$1;bU=bU.$1;if(bT.$==1&&bU.$==1){bS=(bX=new bl({$:1}),bS.$1=bX,bX);bV=bV+1;}else bR=false;}if(bT.$==1||bU.$==1)P.badLengths();bS.$1=bl.Empty;return bW;}};P.max=function(bO){var bP,bQ,bR;P.nonEmpty(bO);bP=bO.$0;bQ=bO.$1;while(bQ.$==1){bR=bQ.$0;if(bA.Compare(bR,bP)===1)bP=bR;bQ=bQ.$1;}return bP;};P.maxBy=function(bO,bP){var bQ,bR,bS,bT,bU;P.nonEmpty(bP);bQ=bP.$0;bR=bO(bQ);bS=bP.$1;while(bS.$==1){bT=bS.$0;bU=bO(bT);if(bA.Compare(bU,bR)===1){bQ=bT;bR=bU;}bS=bS.$1;}return bQ;};P.min=function(bO){var bP,bQ,bR;P.nonEmpty(bO);bP=bO.$0;bQ=bO.$1;while(bQ.$==1){bR=bQ.$0;if(bA.Compare(bR,bP)===-1)bP=bR;bQ=bQ.$1;}return bP;};P.minBy=function(bO,bP){var bQ,bR,bS,bT,bU;P.nonEmpty(bP);bQ=bP.$0;bR=bO(bQ);bS=bP.$1;while(bS.$==1){bT=bS.$0;bU=bO(bT);if(bA.Compare(bU,bR)===-1){bQ=bT;bR=bU;}bS=bS.$1;}return bQ;};P.ofArray=function(bO){var bP,bQ,bR;bP=bl.Empty;for(bQ=N.length(bO)-1,bR=0;bQ>=bR;bQ--)bP=new bl({$:1,$0:N.get(bO,bQ),$1:bP});return bP;};P.ofSeq=function(bO){var bP,bQ,bR,bS,bT,bU;if(bO instanceof bl)return bO;else if(bO instanceof a.Array)return P.ofArray(bO);else{bP=K.Get(bO);try{bR=bP.MoveNext();if(!bR)bQ=bl.Empty;else{bT=new bl({$:1});bS=bT;while(bR){bS.$0=bP.Current();if(bP.MoveNext())bS=(bU=new bl({$:1}),bS.$1=bU,bU);else bR=false;}bS.$1=bl.Empty;bQ=bT;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}}};P.partition=function(bO,bP){var bQ;bQ=N.partition(bO,N.ofList(bP));return[P.ofArray(bQ[0]),P.ofArray(bQ[1])];};P.permute=function(bO,bP){return P.ofArray(N.permute(bO,N.ofList(bP)));};P.reduce=function(bO,bP){var bQ,bR;P.nonEmpty(bP);bQ=bP.$0;bR=bP.$1;while(bR.$==1){bQ=bO(bQ,bR.$0);bR=bR.$1;}return bQ;};P.reduceBack=function(bO,bP){return N.reduceBack(bO,N.ofList(bP));};P.replicate=function(bO,bP){return P.ofArray(N.create(bO,bP));};P.rev=function(bO){var bP,bQ;bP=bl.Empty;bQ=bO;while(bQ.$==1){bP=new bl({$:1,$0:bQ.$0,$1:bP});bQ=bQ.$1;}return bP;};P.scan=function(bO,bP,bQ){return P.ofSeq(O.scan(bO,bP,bQ));};P.scanBack=function(bO,bP,bQ){return P.ofArray(N.scanBack(bO,N.ofList(bP),bQ));};P.sort=function(bO){var bP;bP=N.ofList(bO);N.sortInPlace(bP);return P.ofArray(bP);};P.sortBy=function(bO,bP){var bQ;bQ=N.ofList(bP);N.sortInPlaceBy(bO,bQ);return P.ofArray(bQ);};P.sortByDescending=function(bO,bP){var bQ;bQ=N.ofList(bP);N.sortInPlaceByDescending(bO,bQ);return P.ofArray(bQ);};P.sortDescending=function(bO){var bP;bP=N.ofList(bO);N.sortInPlaceByDescending(a.id,bP);return P.ofArray(bP);};P.sortWith=function(bO,bP){var bQ;bQ=N.ofList(bP);N.sortInPlaceWith(bO,bQ);return P.ofArray(bQ);};P.tail=function(bO){return bO.$==1?bO.$1:P.listEmpty();};P.transpose=function(bO){return P.ofSeq(O.map(P.ofArray,N.transposeArray(N.ofSeq(O.map(N.ofList,bO)))));};P.unzip=function(bO){var bP,bQ,bR,bS;bP=[];bQ=[];bR=K.Get(bO);try{while(bR.MoveNext()){bS=bR.Current();bP.push(bS[0]);bQ.push(bS[1]);}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return[P.ofArray(bP.slice(0)),P.ofArray(bQ.slice(0))];};P.unzip3=function(bO){var bP,bQ,bR,bS,bT;bP=[];bQ=[];bR=[];bS=K.Get(bO);try{while(bS.MoveNext()){bT=bS.Current();bP.push(bT[0]);bQ.push(bT[1]);bR.push(bT[2]);}}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}return[P.ofArray(bP.slice(0)),P.ofArray(bQ.slice(0)),P.ofArray(bR.slice(0))];};P.zip=function(bO,bP){return P.map2(function(bQ,bR){return[bQ,bR];},bO,bP);};P.zip3=function(bO,bP,bQ){return P.map3(function(bR,bS,bT){return[bR,bS,bT];},bO,bP,bQ);};P.chunkBySize=function(bO,bP){return P.map(P.ofArray,P.ofSeq(O.chunkBySize(bO,bP)));};P.compareWith=function(bO,bP,bQ){return O.compareWith(bO,bP,bQ);};P.countBy=function(bO,bP){return P.ofArray(N.countBy(bO,N.ofList(bP)));};P.distinct=function(bO){return P.ofSeq(O.distinct(bO));};P.distinctBy=function(bO,bP){return P.ofSeq(O.distinctBy(bO,bP));};P.splitInto=function(bO,bP){return P.map(P.ofArray,P.ofArray(N.splitInto(bO,N.ofList(bP))));};P.except=function(bO,bP){return P.ofSeq(O.except(bO,bP));};P.tryFindBack=function(bO,bP){return N.tryFindBack(bO,N.ofList(bP));};P.findBack=function(bO,bP){var bQ;bQ=P.tryFindBack(bO,bP);return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};P.findIndexBack=function(bO,bP){var bQ;bQ=N.tryFindIndexBack(bO,N.ofList(bP));return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};P.groupBy=function(bO,bP){var bQ;function bR(bS,bT){return[bS,P.ofArray(bT)];}bQ=N.groupBy(bO,N.ofList(bP));N.mapInPlace(function(bS){return bR(bS[0],bS[1]);},bQ);return P.ofArray(bQ);};P.last=function(bO){var bP,bQ;P.nonEmpty(bO);bP=bO;bQ=bP.$1;while(bQ.$==1){bP=bQ;bQ=bP.$1;}return bP.$0;};P.contains=function(bO,bP){var bQ,bR;bQ=false;bR=bP;while(!bQ&&bR.$==1){bQ=bA.Equals(bO,bR.$0);bR=bR.$1;}return bQ;};P.mapFold=function(bO,bP,bQ){var bR;bR=N.mapFold(bO,bP,N.ofList(bQ));return[P.ofArray(bR[0]),bR[1]];};P.mapFoldBack=function(bO,bP,bQ){var bR;bR=N.mapFoldBack(bO,N.ofList(bP),bQ);return[P.ofArray(bR[0]),bR[1]];};P.pairwise=function(bO){return P.ofSeq(O.pairwise(bO));};P.indexed=function(bO){return P.mapi(function(bP,bQ){return[bP,bQ];},bO);};P.tryHead=function(bO){return bO.$==0?null:{$:1,$0:bO.$0};};P.exactlyOne=function(bO){var bP;return bO.$==1&&(bO.$1.$==0&&(bP=bO.$0,true))?bP:C.FailWith("The input does not have precisely one element.");};P.tryExactlyOne=function(bO){var bP;return bO.$==1&&(bO.$1.$==0&&(bP=bO.$0,true))?{$:1,$0:bP}:null;};P.unfold=function(bO,bP){return P.ofSeq(O.unfold(bO,bP));};P.windowed=function(bO,bP){return P.ofSeq(O.map(P.ofArray,O.windowed(bO,bP)));};P.splitAt=function(bO,bP){return[P.ofSeq(O.take(bO,bP)),P.skip(bO,bP)];};P.insertAt=function(bO,bP,bQ){return bO>=0&&bQ.get_Length()>bO?bO+1===bQ.get_Length()?P.append(bQ,P.ofArray([bP])):bO===0?P.append(P.ofArray([bP]),bQ):P.append(P.append(bQ.GetSlice({$:1,$0:0},{$:1,$0:bO-1}),P.ofArray([bP])),bQ.GetSlice({$:1,$0:bO},null)):C.FailWith("Incorrect index");};P.insertManyAt=function(bO,bP,bQ){return bO>=0&&bQ.get_Length()>bO?bO+1===bQ.get_Length()?P.append(bQ,P.ofSeq(bP)):bO===0?P.append(P.ofSeq(bP),bQ):P.append(P.append(bQ.GetSlice({$:1,$0:0},{$:1,$0:bO-1}),P.ofSeq(bP)),bQ.GetSlice({$:1,$0:bO},null)):C.FailWith("Incorrect index");};P.removeAt=function(bO,bP){return bO>=0&&bP.get_Length()>bO?bO+1===bP.get_Length()?bP.GetSlice({$:1,$0:0},{$:1,$0:bO-1}):bO===0?P.tail(bP):P.append(bP.GetSlice({$:1,$0:0},{$:1,$0:bO-1}),bP.GetSlice({$:1,$0:bO+1},null)):C.FailWith("Incorrect index");};P.removeManyAt=function(bO,bP,bQ){return bO+bP>=0&&bQ.get_Length()>bO+bP?bO+bP===bQ.get_Length()?bQ.GetSlice({$:1,$0:0},{$:1,$0:bO-1}):bO===0?bQ.GetSlice({$:1,$0:bP},null):P.append(bQ.GetSlice({$:1,$0:0},{$:1,$0:bO-1}),bQ.GetSlice({$:1,$0:bO+bP},null)):C.FailWith("Incorrect index");};P.updateAt=function(bO,bP,bQ){return bO>=0&&bQ.get_Length()>bO?bO+1===bQ.get_Length()?P.append(bQ.GetSlice({$:1,$0:0},{$:1,$0:bO-1}),P.ofArray([bP])):bO===0?P.append(P.ofArray([bP]),P.tail(bQ)):P.append(P.append(bQ.GetSlice({$:1,$0:0},{$:1,$0:bO-1}),P.ofArray([bP])),bQ.GetSlice({$:1,$0:bO+1},null)):C.FailWith("Incorrect index");};P.nonEmpty=function(bO){if(bO.$==0)P.listEmpty();};P.listEmpty=function(){return C.FailWith("The input list was empty.");};P.badLengths=function(){return C.FailWith("The lists have different lengths.");};D.getOrValue=function(bO,bP){return bO===null?bP:bO;};D.get=function(bO){return bO===null?C.FailWith("Nullable object must have a value."):bO;};C.range=function(bO,bP){var bQ;bQ=1+bP-bO;return bQ<=0?[]:O.init(bQ,function(bR){return bR+bO;});};C.step=function(bO,bP,bQ){var bR;bR=C.Sign(bP);return O.takeWhile(function(bS){return bR*(bQ-bS)>=0;},O.initInfinite(function(bS){return bO+bS*bP;}));};C.KeyValue=function(bO){return[bO.K,bO.V];};C.Sign=function(bO){return bO===0?0:bO<0?-1:1;};C.toInt=function(bO){var bP;bP=C.toUInt(bO);return bP>=2147483648?bP-4294967296:bP;};C.toUInt=function(bO){return(bO<0?bN.ceil(bO):bN.floor(bO))>>>0;};C.InvalidArg=function(bO,bP){throw new _6.New(bO,bP);};C.InvalidOp=function(bO){throw new _9.New(bO);};C.FailWith=function(bO){throw new e(bO);};bm.string=function(bO,bP,bQ){var bR,bS;return bP==null?bQ!=null&&bQ.$==1?(bR=bQ.$0,bR<0?"":bO.slice(0,bR+1)):"":bQ==null?bO.slice(bP.$0):(bS=bQ.$0,bS<0?"":bO.slice(bP.$0,bS+1));};bm.array=function(bO,bP,bQ){var bR,bS;return bP==null?bQ!=null&&bQ.$==1?(bR=bQ.$0,bR<0?[]:bO.slice(0,bR+1)):[]:bQ==null?bO.slice(bP.$0):(bS=bQ.$0,bS<0?[]:bO.slice(bP.$0,bS+1));};bm.setArray=function(bO,bP,bQ,bR){var bS;bS=bP!=null&&bP.$==1?bP.$0:0;N.setSub(bO,bS,(bQ!=null&&bQ.$==1?bQ.$0:bO.length-1)-bS+1,bR);};bm.array2D=function(bO,bP,bQ,bR,bS){var bT,bU;bT=bP!=null&&bP.$==1?bP.$0:0;bU=bR!=null&&bR.$==1?bR.$0:0;return N.sub2D(bO,bT,bU,(bQ!=null&&bQ.$==1?bQ.$0:bO.length-1)-bT+1,(bS!=null&&bS.$==1?bS.$0:(bO.length?bO[0].length:0)-1)-bU+1);};bm.array2Dfix1=function(bO,bP,bQ,bR){var bS,bT,bU,bV,bW,bX;bS=bQ!=null&&bQ.$==1?bQ.$0:0;bT=bR!=null&&bR.$==1?bR.$0:(bO.length?bO[0].length:0)-1;bU=bT-bS+1;bV=new a.Array(bU);for(bW=0,bX=bU-1;bW<=bX;bW++)N.set(bV,bW,N.get2D(bO,bP,bS+bW));return bV;};bm.array2Dfix2=function(bO,bP,bQ,bR){var bS,bT,bU,bV,bW,bX;bS=bP!=null&&bP.$==1?bP.$0:0;bT=bQ!=null&&bQ.$==1?bQ.$0:bO.length-1;bU=bT-bS+1;bV=new a.Array(bU);for(bW=0,bX=bU-1;bW<=bX;bW++)N.set(bV,bW,N.get2D(bO,bS+bW,bR));return bV;};bm.setArray2Dfix1=function(bO,bP,bQ,bR,bS){var bT,bU,bV,bW;bT=bQ!=null&&bQ.$==1?bQ.$0:0;bU=bR!=null&&bR.$==1?bR.$0:(bO.length?bO[0].length:0)-1;for(bV=0,bW=bU-bT+1-1;bV<=bW;bV++)N.set2D(bO,bP,bT+bV,N.get(bS,bV));};bm.setArray2Dfix2=function(bO,bP,bQ,bR,bS){var bT,bU,bV,bW;bT=bP!=null&&bP.$==1?bP.$0:0;bU=bQ!=null&&bQ.$==1?bQ.$0:bO.length-1;for(bV=0,bW=bU-bT+1-1;bV<=bW;bV++)N.set2D(bO,bT+bV,bR,N.get(bS,bV));};bm.setArray2D=function(bO,bP,bQ,bR,bS,bT){var bU,bV;bU=bP!=null&&bP.$==1?bP.$0:0;bV=bR!=null&&bR.$==1?bR.$0:0;N.setSub2D(bO,bU,bV,(bQ!=null&&bQ.$==1?bQ.$0:bO.length-1)-bU+1,(bS!=null&&bS.$==1?bS.$0:(bO.length?bO[0].length:0)-1)-bV+1,bT);};bn.filter=function(bO,bP){var bQ;return bP!=null&&bP.$==1&&(bO(bP.$0)&&(bQ=bP.$0,true))?bP:null;};bn.fold=function(bO,bP,bQ){return bQ==null?bP:bO(bP,bQ.$0);};bn.foldBack=function(bO,bP,bQ){return bP==null?bQ:bO(bP.$0,bQ);};bn.ofNullable=function(bO){return bO==null?null:{$:1,$0:D.get(bO)};};bn.ofObj=function(bO){return bO==null?null:{$:1,$0:bO};};bn.toArray=function(bO){return bO==null?[]:[bO.$0];};bn.toList=function(bO){return bO==null?bl.Empty:P.ofArray([bO.$0]);};bn.toNullable=function(bO){return bO!=null&&bO.$==1?bO.$0:null;};bn.toObj=function(bO){return bO==null?null:bO.$0;};bo.CopyTo=function(bO,bP,bQ){N.blit(bO,0,bP,bQ,N.length(bO));};bo.Contains=function(bO,bP){return O.exists(function(bQ){return bA.Equals(bP,bQ);},bO);};bo.Clear=function(bO){bO.splice(0,N.length(bO));};bp=b.Random=bH.Class({NextBytes:function(bO){var bP,bQ;for(bP=0,bQ=N.length(bO)-1;bP<=bQ;bP++)N.set(bO,bP,bN.floor(bN.random()*256));},Next:function(bO,bP){return bO>bP?C.FailWith("'minValue' cannot be greater than maxValue."):bO+bN.floor(bN.random()*(bP-bO));},Next$1:function(bO){return bO<0?C.FailWith("'maxValue' must be greater than zero."):bN.floor(bN.random()*bO);},Next$2:function(){return bN.floor(bN.random()*2147483648);}},k,bp);bp.New=bH.Ctor(function(){k.New.call(this);},bp);bq.New=function(bO){return[bO];};br.ToValueOption=function(bO){return bO.$==0?{$:1,$0:bO.$0}:bE.ValueNone;};br.ToOption=function(bO){return bO.$==0?{$:1,$0:bO.$0}:null;};br.ToSeq=function(bO){return bO.$==0?P.ofArray([bO.$0]):bl.Empty;};br.ToList=function(bO){return bO.$==0?P.ofArray([bO.$0]):bl.Empty;};br.ToArray=function(bO){return bO.$==0?[bO.$0]:[];};br.Iterate=function(bO,bP){if(bP.$==0)bO(bP.$0);};br.Contains=function(bO,bP){return bP.$==0&&bA.Equals(bP.$0,bO);};br.ForAll=function(bO,bP){return bP.$==0?bO(bP.$0):true;};br.Exists=function(bO,bP){return bP.$==0&&bO(bP.$0);};br.FoldBack=function(bO,bP,bQ){return bP.$==0?bO(bP.$0,bQ):bQ;};br.Fold=function(bO,bP,bQ){return bQ.$==0?bO(bP,bQ.$0):bP;};br.Count=function(bO){return bO.$==0?1:0;};br.DefaultWith=function(bO,bP){return bP.$==0?bP.$0:bO(bP.$0);};br.DefaultValue=function(bO,bP){return bP.$==0?bP.$0:bO;};br.IsError=function(bO){return bO.$==1;};br.IsOk=function(bO){return bO.$!=1;};br.MapError=function(bO,bP){return bP.$==1?{$:1,$0:bO(bP.$0)}:{$:0,$0:bP.$0};};br.Map=function(bO,bP){return bP.$==1?{$:1,$0:bP.$0}:{$:0,$0:bO(bP.$0)};};br.Bind=function(bO,bP){return bP.$==1?{$:1,$0:bP.$0}:bO(bP.$0);};O.enumFinally=function(bO,bP){return{GetEnumerator:function(){var bQ;try{bQ=K.Get(bO);}catch(bR){bP();throw bR;}return new L.New(null,null,function(bS){return bQ.MoveNext()&&(bS.c=bQ.Current(),true);},function(){bQ.Dispose();bP();});}};};O.enumUsing=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;try{bQ=K.Get(bP(bO));}catch(bS){bR=bO;bR.Dispose();throw bS;}return new L.New(null,null,function(bT){return bQ.MoveNext()&&(bT.c=bQ.Current(),true);},function(){var bT;bQ.Dispose();bT=bO;bT.Dispose();});}};};O.enumWhile=function(bO,bP){return{GetEnumerator:function(){function bQ(bR){var bS;while(true){bS=bR.s;if(bA.Equals(bS,null)){if(bO()){bR.s=K.Get(bP);bR=bR;}else return false;}else if(bS.MoveNext()){bR.c=bS.Current();return true;}else{bS.Dispose();bR.s=null;bR=bR;}}}return new L.New(null,null,bQ,function(bR){var bS;bS=bR.s;if(!bA.Equals(bS,null))bS.Dispose();});}};};bs.createEvent=function(bO,bP,bQ){var bR;bR={AddHandler:bO,RemoveHandler:bP,Subscribe:function(bS){var bT;bT=bQ(function(){return function(bU){return bS.OnNext(bU);};});bO(bT);return{Dispose:function(){return bP(bT);}};}};k.New.call(bR);return bR;};O.allPairs=function(bO,bP){var bQ;bQ=O.cache(bP);return O.collect(function(bR){return O.map(function(bS){return[bR,bS];},bQ);},bO);};O.append=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=K.Get(bO);bR=[true];return new L.New(bQ,null,function(bS){var bT;return bS.s.MoveNext()?(bS.c=bS.s.Current(),true):(bT=bS.s,!bA.Equals(bT,null)?bT.Dispose():void 0,bS.s=null,bR[0]&&(bR[0]=false,bS.s=K.Get(bP),bS.s.MoveNext()?(bS.c=bS.s.Current(),true):(bS.s.Dispose(),bS.s=null,false)));},function(bS){var bT;bT=bS.s;if(!bA.Equals(bT,null))bT.Dispose();});}};};O.cache=function(bO){var bP,bQ;bP=[];bQ=[K.Get(bO)];return{GetEnumerator:function(){return new L.New(0,null,function(bR){var bS;return bR.s<bP.length?(bR.c=bP[bR.s],bR.s=bR.s+1,true):(bS=bQ[0],bA.Equals(bS,null)?false:bS.MoveNext()?(bR.s=bR.s+1,bR.c=bS.Current(),bP.push(bR.c),true):(bS.Dispose(),bQ[0]=null,false));},void 0);}};};O.choose=function(bO,bP){return O.collect(function(bQ){var bR;bR=bO(bQ);return bR==null?bl.Empty:P.ofArray([bR.$0]);},bP);};O.collect=function(bO,bP){return O.concat(O.map(bO,bP));};O.compareWith=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bR=K.Get(bP);try{bT=K.Get(bQ);try{bU=0;bV=true;while(bV&&bU===0)if(bR.MoveNext())bU=bT.MoveNext()?bO(bR.Current(),bT.Current()):1;else if(bT.MoveNext())bU=-1;else bV=false;bS=bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}return bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};O.concat=function(bO){return{GetEnumerator:function(){var bP;function bQ(bR){var bS;while(true){bS=bR.s;if(bA.Equals(bS,null)){if(bP.MoveNext()){bR.s=K.Get(bP.Current());bR=bR;}else{bP.Dispose();return false;}}else if(bS.MoveNext()){bR.c=bS.Current();return true;}else{bR.Dispose();bR.s=null;bR=bR;}}}bP=K.Get(bO);return new L.New(null,null,bQ,function(bR){var bS;bS=bR.s;if(!bA.Equals(bS,null))bS.Dispose();if(!bA.Equals(bP,null))bP.Dispose();});}};};O.countBy=function(bO,bP){return O.delay(function(){return N.countBy(bO,N.ofSeq(bP));});};O.delay=function(bO){return{GetEnumerator:function(){return K.Get(bO());}};};O.distinct=function(bO){return O.distinctBy(a.id,bO);};O.distinctBy=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=K.Get(bP);bR=new bh.New$3();return new L.New(null,null,function(bS){var bT,bU;if(bQ.MoveNext()){bT=bQ.Current();bU=bR.SAdd(bO(bT));while(!bU&&bQ.MoveNext()){bT=bQ.Current();bU=bR.SAdd(bO(bT));}return bU&&(bS.c=bT,true);}else return false;},function(){bQ.Dispose();});}};};O.splitInto=function(bO,bP){bO<=0?C.FailWith("Count must be positive"):void 0;return O.delay(function(){return N.splitInto(bO,N.ofSeq(bP));});};O.exactlyOne=function(bO){var bP,bQ;bP=K.Get(bO);try{return bP.MoveNext()?(bQ=bP.Current(),bP.MoveNext()?C.InvalidOp("Sequence contains more than one element"):bQ):C.InvalidOp("Sequence contains no elements");}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.tryExactlyOne=function(bO){var bP,bQ;bP=K.Get(bO);try{return bP.MoveNext()?(bQ=bP.Current(),bP.MoveNext()?null:{$:1,$0:bQ}):null;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.exists=function(bO,bP){var bQ,bR;bQ=K.Get(bP);try{bR=false;while(!bR&&bQ.MoveNext())bR=bO(bQ.Current());return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.exists2=function(bO,bP,bQ){var bR,bS,bT,bU;bR=K.Get(bP);try{bT=K.Get(bQ);try{bU=false;while(!bU&&bR.MoveNext()&&bT.MoveNext())bU=bO(bR.Current(),bT.Current());bS=bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}return bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};O.filter=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=K.Get(bP);return new L.New(null,null,function(bR){var bS,bT,bU;bS=bQ.MoveNext();bT=void 0;bU=false;while(bS){bT=bQ.Current();bO(bT)?(bR.c=bT,bU=true,bS=false):!bQ.MoveNext()?bS=false:void 0;}return bU;},function(){bQ.Dispose();});}};};O.find=function(bO,bP){var bQ;bQ=O.tryFind(bO,bP);return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};O.findIndex=function(bO,bP){var bQ;bQ=O.tryFindIndex(bO,bP);return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};O.fold=function(bO,bP,bQ){var bR,bS;bR=bP;bS=K.Get(bQ);try{while(bS.MoveNext())bR=bO(bR,bS.Current());return bR;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};O.forall=function(bO,bP){return!O.exists(function(bQ){return!bO(bQ);},bP);};O.forall2=function(bO,bP,bQ){return!O.exists2(function(bR,bS){return!bO(bR,bS);},bP,bQ);};O.groupBy=function(bO,bP){return O.delay(function(){return N.groupBy(bO,N.ofSeq(bP));});};O.head=function(bO){var bP;bP=K.Get(bO);try{return bP.MoveNext()?bP.Current():O.insufficient();}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.init=function(bO,bP){return O.take(bO,O.initInfinite(bP));};O.initInfinite=function(bO){return{GetEnumerator:function(){return new L.New(0,null,function(bP){bP.c=bO(bP.s);bP.s=bP.s+1;return true;},void 0);}};};O.isEmpty=function(bO){var bP;bP=K.Get(bO);try{return!bP.MoveNext();}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.iter=function(bO,bP){var bQ;bQ=K.Get(bP);try{while(bQ.MoveNext())bO(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.iter2=function(bO,bP,bQ){var bR,bS,bT;bR=K.Get(bP);try{bT=K.Get(bQ);try{while(bR.MoveNext()&&bT.MoveNext())bO(bR.Current(),bT.Current());bS=void 0;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};O.iteri=function(bO,bP){var bQ,bR;bQ=0;bR=K.Get(bP);try{while(bR.MoveNext()){bO(bQ,bR.Current());bQ=bQ+1;}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};O.length=function(bO){var bP,bQ;bP=0;bQ=K.Get(bO);try{while(bQ.MoveNext())bP=bP+1;return bP;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.map=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=K.Get(bP);return new L.New(null,null,function(bR){return bQ.MoveNext()&&(bR.c=bO(bQ.Current()),true);},function(){bQ.Dispose();});}};};O.mapi=function(bO,bP){return O.map2(bO,O.initInfinite(a.id),bP);};O.map2=function(bO,bP,bQ){return{GetEnumerator:function(){var bR,bS;bR=K.Get(bP);bS=K.Get(bQ);return new L.New(null,null,function(bT){return bR.MoveNext()&&bS.MoveNext()&&(bT.c=bO(bR.Current(),bS.Current()),true);},function(){bR.Dispose();bS.Dispose();});}};};O.maxBy=function(bO,bP){var bQ,bR,bS,bT,bU;bQ=K.Get(bP);try{if(!bQ.MoveNext())O.seqEmpty();bR=bQ.Current();bS=bO(bR);while(bQ.MoveNext()){bT=bQ.Current();bU=bO(bT);if(bA.Compare(bU,bS)===1){bR=bT;bS=bU;}}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.minBy=function(bO,bP){var bQ,bR,bS,bT,bU;bQ=K.Get(bP);try{if(!bQ.MoveNext())O.seqEmpty();bR=bQ.Current();bS=bO(bR);while(bQ.MoveNext()){bT=bQ.Current();bU=bO(bT);if(bA.Compare(bU,bS)===-1){bR=bT;bS=bU;}}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.max=function(bO){var bP,bQ,bR;bP=K.Get(bO);try{if(!bP.MoveNext())O.seqEmpty();bQ=bP.Current();while(bP.MoveNext()){bR=bP.Current();if(bA.Compare(bR,bQ)===1)bQ=bR;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.min=function(bO){var bP,bQ,bR;bP=K.Get(bO);try{if(!bP.MoveNext())O.seqEmpty();bQ=bP.Current();while(bP.MoveNext()){bR=bP.Current();if(bA.Compare(bR,bQ)===-1)bQ=bR;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};O.nth=function(bO,bP){var bQ,bR;if(bO<0)C.FailWith("negative index requested");bQ=-1;bR=K.Get(bP);try{while(bQ<bO){!bR.MoveNext()?O.insufficient():void 0;bQ=bQ+1;}return bR.Current();}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};O.pairwise=function(bO){return O.map(function(bP){return[N.get(bP,0),N.get(bP,1)];},O.windowed(2,bO));};O.pick=function(bO,bP){var bQ;bQ=O.tryPick(bO,bP);return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};O.readOnly=function(bO){return{GetEnumerator:function(){return K.Get(bO);}};};O.reduce=function(bO,bP){var bQ,bR;bQ=K.Get(bP);try{if(!bQ.MoveNext())O.seqEmpty();bR=bQ.Current();while(bQ.MoveNext())bR=bO(bR,bQ.Current());return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.scan=function(bO,bP,bQ){return{GetEnumerator:function(){var bR;bR=K.Get(bQ);return new L.New(false,null,function(bS){return bS.s?bR.MoveNext()&&(bS.c=bO(bS.c,bR.Current()),true):(bS.c=bP,bS.s=true,true);},function(){bR.Dispose();});}};};O.skip=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=K.Get(bP);return new L.New(true,null,function(bR){var bS,bT;if(bR.s){for(bS=1,bT=bO;bS<=bT;bS++)if(!bQ.MoveNext())O.insufficient();bR.s=false;}else null;return bQ.MoveNext()&&(bR.c=bQ.Current(),true);},function(){bQ.Dispose();});}};};O.skipWhile=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=K.Get(bP);return new L.New(true,null,function(bR){var bS,bT;if(bR.s){bS=true;bT=false;while(bS)if(bQ.MoveNext()){if(!bO(bQ.Current()))bS=false;}else{bS=false;bT=true;}bR.s=false;return bT?false:(bR.c=bQ.Current(),true);}else return bQ.MoveNext()&&(bR.c=bQ.Current(),true);},function(){bQ.Dispose();});}};};O.sort=function(bO){return O.sortBy(a.id,bO);};O.sortBy=function(bO,bP){return O.delay(function(){var bQ;bQ=N.ofSeq(bP);N.sortInPlaceBy(bO,bQ);return bQ;});};O.sortByDescending=function(bO,bP){return O.delay(function(){var bQ;bQ=N.ofSeq(bP);N.sortInPlaceByDescending(bO,bQ);return bQ;});};O.sortDescending=function(bO){return O.sortByDescending(a.id,bO);};O.sum=function(bO){var bP,bQ;bP=0;bQ=K.Get(bO);try{while(bQ.MoveNext())bP=bP+bQ.Current();}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}return bP;};O.sumBy=function(bO,bP){var bQ,bR;bQ=0;bR=K.Get(bP);try{while(bR.MoveNext())bQ=bQ+bO(bR.Current());}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return bQ;};O.average=function(bO){var bP,bQ,bR;bP=0;bQ=0;bR=K.Get(bO);try{while(bR.MoveNext()){bP=bP+bR.Current();bQ=bQ+1;}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return bQ===0?O.seqEmpty():bP/bQ;};O.averageBy=function(bO,bP){var bQ,bR,bS;bQ=0;bR=0;bS=K.Get(bP);try{while(bS.MoveNext()){bQ=bQ+bO(bS.Current());bR=bR+1;}}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}return bR===0?O.seqEmpty():bQ/bR;};O.take=function(bO,bP){bO<0?O.nonNegative():void 0;return{GetEnumerator:function(){var bQ;bQ=[K.Get(bP)];return new L.New(0,null,function(bR){var bS;bR.s=bR.s+1;return bR.s>bO?false:(bS=bQ[0],bA.Equals(bS,null)?O.insufficient():bS.MoveNext()?(bR.c=bS.Current(),bR.s===bO?(bS.Dispose(),bQ[0]=null):void 0,true):(bS.Dispose(),bQ[0]=null,O.insufficient()));},function(){var bR;bR=bQ[0];if(!bA.Equals(bR,null))bR.Dispose();});}};};O.takeWhile=function(bO,bP){return O.delay(function(){return O.enumUsing(K.Get(bP),function(bQ){return O.enumWhile(function(){return bQ.MoveNext()&&bO(bQ.Current());},O.delay(function(){return[bQ.Current()];}));});});};O.transpose=function(bO){return O.delay(function(){return N.transposeArray(N.ofSeq(O.map(N.ofSeq,bO)));});};O.truncate=function(bO,bP){return O.delay(function(){return O.enumUsing(K.Get(bP),function(bQ){var bR;bR=[0];return O.enumWhile(function(){return bQ.MoveNext()&&bR[0]<bO;},O.delay(function(){bR[0]++;return[bQ.Current()];}));});});};O.tryFind=function(bO,bP){var bQ,bR,bS;bQ=K.Get(bP);try{bR=null;while(bR==null&&bQ.MoveNext()){bS=bQ.Current();if(bO(bS))bR={$:1,$0:bS};}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.findBack=function(bO,bP){var bQ;bQ=N.tryFindBack(bO,N.ofSeq(bP));return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};O.tryFindIndex=function(bO,bP){var bQ,bR,bS;bQ=K.Get(bP);try{bR=true;bS=0;while(bR&&bQ.MoveNext())if(bO(bQ.Current()))bR=false;else bS=bS+1;return bR?null:{$:1,$0:bS};}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.findIndexBack=function(bO,bP){var bQ;bQ=N.tryFindIndexBack(bO,N.ofSeq(bP));return bQ==null?C.FailWith("KeyNotFoundException"):bQ.$0;};O.tryPick=function(bO,bP){var bQ,bR;bQ=K.Get(bP);try{bR=null;while(bA.Equals(bR,null)&&bQ.MoveNext())bR=bO(bQ.Current());return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.unfold=function(bO,bP){return{GetEnumerator:function(){return new L.New(bP,null,function(bQ){var bR;bR=bO(bQ.s);return bR==null?false:(bQ.c=bR.$0[0],bQ.s=bR.$0[1],true);},void 0);}};};O.windowed=function(bO,bP){bO<=0?C.FailWith("The input must be positive."):void 0;return O.delay(function(){return O.enumUsing(K.Get(bP),function(bQ){var bR;bR=[];return O.append(O.enumWhile(function(){return bR.length<bO&&bQ.MoveNext();},O.delay(function(){bR.push(bQ.Current());return[];})),O.delay(function(){return bR.length===bO?O.append([bR.slice(0)],O.delay(function(){return O.enumWhile(function(){return bQ.MoveNext();},O.delay(function(){bR.shift();bR.push(bQ.Current());return[bR.slice(0)];}));})):[];}));});});};O.zip=function(bO,bP){return O.map2(function(bQ,bR){return[bQ,bR];},bO,bP);};O.map3=function(bO,bP,bQ,bR){return{GetEnumerator:function(){var bS,bT,bU;bS=K.Get(bP);bT=K.Get(bQ);bU=K.Get(bR);return new L.New(null,null,function(bV){return bS.MoveNext()&&bT.MoveNext()&&bU.MoveNext()&&(bV.c=bO(bS.Current(),bT.Current(),bU.Current()),true);},function(){bS.Dispose();bT.Dispose();bU.Dispose();});}};};O.zip3=function(bO,bP,bQ){return O.map3(function(bR,bS,bT){return[bR,bS,bT];},bO,bP,bQ);};O.fold2=function(bO,bP,bQ,bR){return N.fold2(bO,bP,N.ofSeq(bQ),N.ofSeq(bR));};O.foldBack=function(bO,bP,bQ){return N.foldBack(bO,N.ofSeq(bP),bQ);};O.foldBack2=function(bO,bP,bQ,bR){return N.foldBack2(bO,N.ofSeq(bP),N.ofSeq(bQ),bR);};O.iteri2=function(bO,bP,bQ){var bR,bS,bT,bU;bR=0;bS=K.Get(bP);try{bU=K.Get(bQ);try{while(bS.MoveNext()&&bU.MoveNext()){bO(bR,bS.Current(),bU.Current());bR=bR+1;}bT=void 0;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}bT;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};O.mapi2=function(bO,bP,bQ){return O.map3(bO,O.initInfinite(a.id),bP,bQ);};O.mapFold=function(bO,bP,bQ){return N.mapFold(bO,bP,N.ofSeq(bQ));};O.mapFoldBack=function(bO,bP,bQ){return N.mapFoldBack(bO,N.ofSeq(bP),bQ);};O.permute=function(bO,bP){return O.delay(function(){return N.permute(bO,N.ofSeq(bP));});};O.reduceBack=function(bO,bP){return N.reduceBack(bO,N.ofSeq(bP));};O.replicate=function(bO,bP){bO<0?O.nonNegative():void 0;return O.delay(function(){return O.map(function(){return bP;},C.range(0,bO-1));});};O.rev=function(bO){return O.delay(function(){return N.ofSeq(bO).slice().reverse();});};O.scanBack=function(bO,bP,bQ){return O.delay(function(){return N.scanBack(bO,N.ofSeq(bP),bQ);});};O.indexed=function(bO){return O.mapi(function(bP,bQ){return[bP,bQ];},bO);};O.sortWith=function(bO,bP){return O.delay(function(){var bQ;bQ=N.ofSeq(bP);N.sortInPlaceWith(bO,bQ);return bQ;});};O.tail=function(bO){return O.skip(1,bO);};O.insertAt=function(bO,bP,bQ){return bO>=0&&O.length(bQ)>bO?bO+1===O.length(bQ)?O.append(bQ,[bP]):bO===0?O.append([bP],bQ):{GetEnumerator:function(){var bR,bS;bR=K.Get(bQ);bS=0;return new L.New(null,null,function(bT){return bS===bO?(bT.c=bP,bS=bS+1,true):(bS=bS+1,bR.MoveNext()&&(bT.c=bR.Current(),true));},function(){bR.Dispose();});}}:C.FailWith("Incorrect index");};O.insertManyAt=function(bO,bP,bQ){return bO>=0&&O.length(bQ)>bO?bO+1===O.length(bQ)?O.append(bQ,bP):bO===0?O.append(bP,bQ):{GetEnumerator:function(){var bR,bS,bT;bR=K.Get(bQ);bS=K.Get(bP);bT=0;return new L.New(null,null,function(bU){return bT===bO?bS.MoveNext()?(bU.c=bS.Current(),true):(bT=bT+1,bR.MoveNext()&&(bU.c=bR.Current(),true)):(bT=bT+1,bR.MoveNext()&&(bU.c=bR.Current(),true));},function(){bR.Dispose();bS.Dispose();});}}:C.FailWith("Incorrect index");};O.removeAt=function(bO,bP){return bO>=0&&O.length(bP)>bO?bO+1===O.length(bP)?O.take(bO,bP):bO===0?O.tail(bP):{GetEnumerator:function(){var bQ,bR;bQ=K.Get(bP);bR=0;return new L.New(null,null,function(bS){return bR===bO?(bR=bR+1,bQ.MoveNext()&&(bQ.MoveNext()&&(bS.c=bQ.Current(),true))):(bR=bR+1,bQ.MoveNext()&&(bS.c=bQ.Current(),true));},function(){bQ.Dispose();});}}:C.FailWith("Incorrect index");};O.removeManyAt=function(bO,bP,bQ){return bO+bP>=0&&O.length(bQ)>bO+bP?bO+bP===O.length(bQ)?O.take(bO,bQ):bO===0?O.skip(bP,bQ):{GetEnumerator:function(){var bR,bS,bT;bR=K.Get(bQ);bS=0;bT=bP;return new L.New(null,null,function(bU){if(bS===bO){while(bT>0&&bR.MoveNext())bT=bT-1;bS=bS+1;return bR.MoveNext()&&(bU.c=bR.Current(),true);}else{bS=bS+1;return bR.MoveNext()&&(bU.c=bR.Current(),true);}},function(){bR.Dispose();});}}:C.FailWith("Incorrect index");};O.updateAt=function(bO,bP,bQ){return bO>=0&&O.length(bQ)>bO?bO+1===O.length(bQ)?O.append(O.take(bO,bQ),[bP]):bO===0?O.append([bP],O.tail(bQ)):{GetEnumerator:function(){var bR,bS;bR=K.Get(bQ);bS=0;return new L.New(null,null,function(bT){return bS===bO?bR.MoveNext()&&(bT.c=bP,bS=bS+1,true):(bS=bS+1,bR.MoveNext()&&(bT.c=bR.Current(),true));},function(){bR.Dispose();});}}:C.FailWith("Incorrect index");};O.seqEmpty=function(){return C.FailWith("The input sequence was empty.");};bt.CopyTo=function(bO,bP,bQ){N.blit(bP,0,bP,bQ,N.length(bO));};bt.Contains=function(bO,bP){return O.exists(function(bQ){return bA.Equals(bP,bQ);},bO);};bt.Clear=function(bO){bO.splice(0,N.length(bO));};bu.RegexEscape=function(bO){return bO.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bu.SplitWith=function(bO,bP){return bO.split(bP);};bu.Join=function(bO,bP){return bP.join(bO);};bu.TrimEndWS=function(bO){return bO.replace(new a.RegExp("\\s+$"),"");};bu.TrimStartWS=function(bO){return bO.replace(new a.RegExp("^\\s+"),"");};bu.Trim=function(bO){return bO.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bu.StartsWith=function(bO,bP){return bO.substring(0,bP.length)==bP;};bu.Substring=function(bO,bP,bQ){return bO.substr(bP,bQ);};bu.ReplaceOnce=function(bO,bP,bQ){return bO.replace(bP,bQ);};bu.Remove=function(bO,bP,bQ){return bO.substring(0,bP)+bO.substring(bP+bQ);};bu.PadRightWith=function(bO,bP,bQ){return bP>bO.length?bO+a.Array(bP-bO.length+1).join(bQ):bO;};bu.PadLeftWith=function(bO,bP,bQ){return bP>bO.length?a.Array(bP-bO.length+1).join(bQ)+bO:bO;};bu.LastIndexOf=function(bO,bP,bQ){return bO.lastIndexOf(bP,bQ);};bu.IsNullOrWhiteSpace=function(bO){return bO==null||(new a.RegExp("^\\s*$")).test(bO);};bu.IsNullOrEmpty=function(bO){return bO==null||bO=="";};bu.Insert=function(bO,bP,bQ){return bO.substring(0,bP-1)+bQ+bO.substring(bP);};bu.IndexOf=function(bO,bP,bQ){return bO.indexOf(bP,bQ);};bu.EndsWith=function(bO,bP){return bO.substring(bO.length-bP.length)==bP;};bu.collect=function(bO,bP){return N.init(bP.length,function(bQ){return bO(bP[bQ]);}).join("");};bu.concat=function(bO,bP){return N.ofSeq(bP).join(bO);};bu.exists=function(bO,bP){return O.exists(bO,bu.protect(bP));};bu.forall=function(bO,bP){return O.forall(bO,bu.protect(bP));};bu.init=function(bO,bP){return N.init(bO,bP).join("");};bu.iter=function(bO,bP){O.iter(bO,bu.protect(bP));};bu.iteri=function(bO,bP){O.iteri(bO,bu.protect(bP));};bu.length=function(bO){return bu.protect(bO).length;};bu.map=function(bO,bP){return bu.collect(bO,bu.protect(bP));};bu.mapi=function(bO,bP){return N.ofSeq(O.mapi(bO,bP)).join("");};bu.replicate=function(bO,bP){return N.create(bO,bP).join("");};bu.protect=function(bO){return bO==null?"":bO;};bu.SFormat=function(bO,bP){return bO.replace(new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bQ,bR,bS){var bT,bU,bV;bT=bK(N.get(bP,+bR));return!bA.Equals(bS,void 0)?(bU=+bS,(bV=bN.abs(bU),bV>bT.length?bU>0?bu.PadLeft(bT,bV):bu.PadRight(bT,bV):bT)):bT;});};bu.Filter=function(bO,bP){return N.ofSeq(O.choose(function(bQ){return bO(bQ)?{$:1,$0:bQ}:null;},bP)).join("");};bu.SplitStrings=function(bO,bP,bQ){return bu.Split(bO,new a.RegExp(bu.concat("|",N.map(bu.RegexEscape,bP))),bQ);};bu.SplitChars=function(bO,bP,bQ){return bu.Split(bO,new a.RegExp("["+bu.RegexEscape(bP.join(""))+"]"),bQ);};bu.Split=function(bO,bP,bQ){return bQ===1?N.filter(function(bR){return bR!=="";},bu.SplitWith(bO,bP)):bu.SplitWith(bO,bP);};bu.TrimEnd=function(bO,bP){var bQ,bR;if(bA.Equals(bP,null)||bP.length==0)return bu.TrimEndWS(bO);else{bQ=bO.length-1;bR=true;while(bQ>=0&&bR)(function(){var bS;bS=bO[bQ];return N.exists(function(bT){return bS===bT;},bP)?void(bQ=bQ-1):void(bR=false);}());return bu.Substring(bO,0,bQ+1);}};bu.TrimStart=function(bO,bP){var bQ,bR;if(bA.Equals(bP,null)||bP.length==0)return bu.TrimStartWS(bO);else{bQ=0;bR=true;while(bQ<bO.length&&bR)(function(){var bS;bS=bO[bQ];return N.exists(function(bT){return bS===bT;},bP)?void(bQ=bQ+1):void(bR=false);}());return bO.substring(bQ);}};bu.ToCharArrayRange=function(bO,bP,bQ){return N.init(bQ,function(bR){return bO[bP+bR];});};bu.ToCharArray=function(bO){return N.init(bO.length,function(bP){return bO[bP];});};bu.ReplaceChar=function(bO,bP,bQ){return bu.Replace(bO,bP,bQ);};bu.Replace=function(bO,bP,bQ){function bR(bS){var bT,bU,bV;bT=bS.indexOf(bP);return bT!==-1?(bU=bu.ReplaceOnce(bS,bP,bQ),(bV=bT+bQ.length,bu.Substring(bU,0,bT+bQ.length)+bR(bU.substring(bV)))):bS;}return bR(bO);};bu.PadRight=function(bO,bP){return bu.PadRightWith(bO,bP," ");};bu.PadLeft=function(bO,bP){return bu.PadLeftWith(bO,bP," ");};bu.CopyTo=function(bO,bP,bQ,bR,bS){N.blit(bu.ToCharArray(bO),bP,bQ,bR,bS);};bu.Compare=function(bO,bP){return bA.Compare(bO,bP);};bv=b.Task=bH.Class({Start:function(){var bO;bO=this;if(bA.Equals(this.status,0)){this.status=2;F.scheduler().Fork(function(){var bP;bO.status=3;try{bO.Execute();bO.status=5;}catch(bQ){if(bQ instanceof _5?bA.Equals(bQ.ct,bO.token)?(bP=bQ,true):(bP=bQ,false):(bP=bQ,false)){bM.log("Task cancellation caught:",bP);bO.exc=new _.New$3([bP]);bO.status=6;}else{bM.log("Task error caught:",bP);bO.exc=new _.New$3([bP]);bO.status=7;}}bO.RunContinuations();});}else C.InvalidOp("Task not in initial state");},StartContinuation:function(){var bO;bO=this;if(bA.Equals(this.status,1)){this.status=2;F.scheduler().Fork(function(){if(bA.Equals(bO.status,2)){bO.status=3;try{bO.Execute();bO.status=5;}catch(bP){bO.exc=new _.New$3([bP]);bO.status=7;}bO.RunContinuations();}});}},ContinueWith:function(bO,bP){var bQ,bR;bQ=this;bR=new bw.New$4(function(){return bO(bQ);},bP,1,null,void 0);if(this.get_IsCompleted())bR.StartContinuation();else this.continuations.push(bR);return bR;},ContinueWith$1:function(bO,bP){var bQ,bR;bQ=this;bR=new bv.New$4(function(){return bO(bQ);},bP,1,null);if(this.get_IsCompleted())bR.StartContinuation();else this.continuations.push(bR);return bR;},RunContinuations:function(){var bO,bP,bQ;bO=this.continuations;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)N.get(bO,bP).StartContinuation();},OnCompleted:function(bO){if(this.get_IsCompleted())bO();else{bA.Equals(this.get_Status(),0)?this.Start():void 0;this.ContinueWith$1(function(){return bO();},F.noneCT());}},get_Status:function(){return this.status;},get_IsFaulted:function(){return bA.Equals(this.status,7);},get_IsCompleted:function(){return bA.Equals(this.status,5)||bA.Equals(this.status,7)||bA.Equals(this.status,6);},get_IsCanceled:function(){return bA.Equals(this.status,6);},get_Exception:function(){return this.exc;},Execute:function(){this.action();}},k,bv);bv.Yield=function(){return new bv.New$3(function(){return null;});};bv.WhenAll=function(bO){var bP,bQ,bR,bS,bT,bU;bP=N.length(bO);bQ=[0];bR=new a.Array(bP);bS=new bx.New();for(bT=0,bU=bP-1;bT<=bU;bT++)(function(bV){N.get(bO,bT).ContinueWith$1(function(bW){return bW.get_IsFaulted()?void bS.TrySetException$1(bW.get_Exception()):bW.get_IsCanceled()?void bS.TrySetCanceled$1():(bQ[0]++,bR[bV]=bW.get_Result(),bQ[0]===bP?bS.SetResult(bR):null);},F.noneCT());}(bT));return bS.get_Task();};bv.WhenAll$1=function(bO){var bP,bQ,bR,bS,bT;bP=N.length(bO);bQ=[0];bR=new bx.New();for(bS=0,bT=bP-1;bS<=bT;bS++)N.get(bO,bS).ContinueWith$1(function(bU){return bU.get_IsFaulted()?void bR.TrySetException$1(bU.get_Exception()):bU.get_IsCanceled()?void bR.TrySetCanceled$1():(bQ[0]++,bQ[0]===bP?void bR.TrySetResult():null);},F.noneCT());return bR.get_Task();};bv.WhenAny=function(bO){var bP,bQ,bR;bP=new bx.New();for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)N.get(bO,bQ).ContinueWith(function(bS){bP.TrySetResult(bS);},F.noneCT());return bP.get_Task();};bv.WhenAny$1=function(bO){var bP,bQ,bR;bP=new bx.New();for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)N.get(bO,bQ).ContinueWith$1(function(bS){bP.TrySetResult(bS);},F.noneCT());return bP.get_Task();};bv.Delay=function(bO,bP){return F.StartAsTask(F.Sleep(bO),{$:1,$0:bP});};bv.Delay$1=function(bO){return F.StartAsTask(F.Sleep(bO),null);};bv.Run=function(bO,bP){var bQ;bQ=bO();return bP.c?bv.FromCanceled(bP):(bA.Equals(bQ.get_Status(),0)?bQ.Start():void 0,bQ);};bv.Run$1=function(bO,bP){var bQ;bQ=new bw.New$4(bO,bP,0,null,void 0);bQ.Start();return bQ;};bv.Run$2=function(bO,bP){var bQ;bQ=bO();return bP.c?bv.FromCanceled$1(bP):(bA.Equals(bQ.get_Status(),0)?bQ.Start():void 0,bQ);};bv.Run$3=function(bO,bP){var bQ;bQ=new bv.New$4(bO,bP,0,null);bQ.Start();return bQ;};bv.FromResult=function(bO){return new bw.New$4(null,F.noneCT(),5,null,bO);};bv.FromException=function(bO){return new bw.New$4(null,F.noneCT(),7,new _.New$3([bO]),null);};bv.FromException$1=function(bO){return new bv.New$4(null,F.noneCT(),7,new _.New$3([bO]));};bv.FromCanceled=function(bO){return new bw.New$4(null,bO,6,new _.New$3([new bc.New()]),null);};bv.FromCanceled$1=function(bO){return new bv.New$4(null,bO,6,new _.New$3([new bc.New()]));};bv.New=bH.Ctor(function(bO,bP,bQ){bv.New$4.call(this,function(){return bO(bP);},bQ,0,null);},bv);bv.New$1=bH.Ctor(function(bO,bP){bv.New$4.call(this,function(){return bO(bP);},F.noneCT(),0,null);},bv);bv.New$2=bH.Ctor(function(bO,bP){bv.New$4.call(this,bO,bP,0,null);},bv);bv.New$3=bH.Ctor(function(bO){bv.New$4.call(this,bO,F.noneCT(),0,null);},bv);bv.New$4=bH.Ctor(function(bO,bP,bQ,bR){k.New.call(this);this.action=bO;this.token=bP;this.status=bQ;this.continuations=[];this.exc=bR;},bv);bw=b.Task1=bH.Class({Execute:function(){this.result=this.func();},get_Result:function(){var bO;switch(this.get_Status()){case 5:return this.result;case 7:case 6:throw this.get_Exception();default:return C.InvalidOp("Task has not been completed, has no Result");}}},bv,bw);bw.New=bH.Ctor(function(bO,bP,bQ){bw.New$4.call(this,function(){return bO(bP);},bQ,0,null,void 0);},bw);bw.New$1=bH.Ctor(function(bO,bP){bw.New$4.call(this,function(){return bO(bP);},F.noneCT(),0,null,void 0);},bw);bw.New$2=bH.Ctor(function(bO,bP){bw.New$4.call(this,bO,bP,0,null,void 0);},bw);bw.New$3=bH.Ctor(function(bO){bw.New$4.call(this,bO,F.noneCT(),0,null,void 0);},bw);bw.New$4=bH.Ctor(function(bO,bP,bQ,bR,bS){bv.New$4.call(this,null,bP,bQ,bR);this.func=bO;this.result=bS;},bw);bx=b.TaskCompletionSource=bH.Class({TrySetResult:function(bO){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=bO,this.task.RunContinuations(),true);},TrySetException:function(bO){return this.TrySetException$1(new _.New$2(bO));},TrySetException$1:function(bO){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new _.New$3([bO]),this.task.RunContinuations(),true);},TrySetCanceled:function(bO){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.token=bO,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(bO){this.task.get_IsCompleted()?C.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=bO;this.task.RunContinuations();},SetException:function(bO){this.SetException$1(new _.New$2(bO));},SetException$1:function(bO){this.task.get_IsCompleted()?C.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new _.New$3([bO]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?C.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},k,bx);bx.New=bH.Ctor(function(){k.New.call(this);this.task=new bw.New$4(null,F.noneCT(),1,null,void 0);},bx);by=b.TaskBuilderBase=bH.Class({},k,by);by.New=bH.Ctor(function(){k.New.call(this);},by);bz=b.TaskBuilder=bH.Class({},by,bz);bz.New=bH.Ctor(function(){by.New.call(this);},bz);bA.Hash=function(bO){var bP;bP=typeof bO;return bP=="function"?0:bP=="boolean"?bO?1:0:bP=="number"?bO:bP=="string"?bA.hashString(bO):bP=="object"?bO==null?0:bO instanceof a.Array?bA.hashArray(bO):bA.hashObject(bO):0;};bA.hashObject=function(bO){var bP,bQ;if("GetHashCode"in bO)return bO.GetHashCode();else{bP=[0];for(var bR in bO)if(function(bS){bP[0]=bA.hashMix(bA.hashMix(bP[0],bA.hashString(bS)),bA.Hash(bO[bS]));return false;}(bR))break;return bP[0];}};bA.hashString=function(bO){var bP,bQ,bR;if(bO===null)return 0;else{bP=5381;for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP=bA.hashMix(bP,bO[bQ].charCodeAt());return bP;}};bA.hashArray=function(bO){var bP,bQ,bR;bP=-34948909;for(bQ=0,bR=N.length(bO)-1;bQ<=bR;bQ++)bP=bA.hashMix(bP,bA.Hash(N.get(bO,bQ)));return bP;};bA.hashMix=function(bO,bP){return(bO<<5)+bO+bP;};bA.Equals=function(bO,bP){var bQ,bR,bS,bT;if(bO===bP)return true;else{bQ=typeof bO;if(bQ=="object"){if(bO===null||bO===void 0||bP===null||bP===void 0||!bA.Equals(typeof bP,"object"))return false;else if("Equals"in bO)return bO.Equals(bP);else if("Equals"in bP)return false;else if(bO instanceof a.Array&&bP instanceof a.Array)return bA.arrayEquals(bO,bP);else if(bO instanceof bL&&bP instanceof bL)return bA.dateEquals(bO,bP);else{bR=[true];for(var bU in bO)if(function(bV){bR[0]=!bO.hasOwnProperty(bV)||bP.hasOwnProperty(bV)&&bA.Equals(bO[bV],bP[bV]);return!bR[0];}(bU))break;if(bR[0]){for(var bV in bP)if(function(bW){bR[0]=!bP.hasOwnProperty(bW)||bO.hasOwnProperty(bW);return!bR[0];}(bV))break;}return bR[0];}}else return bQ=="function"&&("$Func"in bO?bO.$Func===bP.$Func&&bO.$Target===bP.$Target:"$Invokes"in bO&&"$Invokes"in bP&&bA.arrayEquals(bO.$Invokes,bP.$Invokes));}};bA.dateEquals=function(bO,bP){return bO.getTime()===bP.getTime();};bA.arrayEquals=function(bO,bP){var bQ,bR;if(N.length(bO)===N.length(bP)){bQ=true;bR=0;while(bQ&&bR<N.length(bO)){!bA.Equals(N.get(bO,bR),N.get(bP,bR))?bQ=false:void 0;bR=bR+1;}return bQ;}else return false;};bA.Compare=function(bO,bP){var bQ,bR,bS,bT,bU,bV;if(bO===bP)return 0;else{bR=typeof bO;switch(bR=="function"?1:bR=="boolean"?2:bR=="number"?2:bR=="string"?2:bR=="object"?3:0){case 0:return typeof bP=="undefined"?0:-1;case 1:return C.FailWith("Cannot compare function values.");case 2:return bO<bP?-1:1;case 3:if(bO===null)bS=-1;else if(bP===null)bS=1;else if("CompareTo"in bO)bS=bO.CompareTo(bP);else if("CompareTo0"in bO)bS=bO.CompareTo0(bP);else if(bO instanceof a.Array&&bP instanceof a.Array)bS=bA.compareArrays(bO,bP);else if(bO instanceof bL&&bP instanceof bL)bS=bA.compareDates(bO,bP);else{bT=[0];for(var bW in bO)if(function(bX){return!bO.hasOwnProperty(bX)?false:!bP.hasOwnProperty(bX)?(bT[0]=1,true):(bT[0]=bA.Compare(bO[bX],bP[bX]),bT[0]!==0);}(bW))break;if(bT[0]===0){for(var bX in bP)if(function(bY){return!bP.hasOwnProperty(bY)?false:!bO.hasOwnProperty(bY)&&(bT[0]=-1,true);}(bX))break;}bS=bT[0];}return bS;}}};bA.compareDates=function(bO,bP){return bA.Compare(bO.getTime(),bP.getTime());};bA.compareArrays=function(bO,bP){var bQ,bR;if(N.length(bO)<N.length(bP))return -1;else if(N.length(bO)>N.length(bP))return 1;else{bQ=0;bR=0;while(bQ===0&&bR<N.length(bO)){bQ=bA.Compare(N.get(bO,bR),N.get(bP,bR));bR=bR+1;}return bQ;}};bE.ValueNone={$:0};bE.get_Value=function(bO){return bO.$==1?bO.$0:C.InvalidOp("ValueOption.Value");};bF.filter=function(bO,bP){var bQ;return bP.$==1&&bO(bP.$0)?bP:bE.ValueNone;};bF.fold=function(bO,bP,bQ){return bQ.$==0?bP:bO(bP,bQ.$0);};bF.foldBack=function(bO,bP,bQ){return bP.$==0?bQ:bO(bP.$0,bQ);};bF.ofNullable=function(bO){return bO==null?bE.ValueNone:{$:1,$0:D.get(bO)};};bF.ofObj=function(bO){return bO==null?bE.ValueNone:{$:1,$0:bO};};bF.toArray=function(bO){return bO.$==0?[]:[bO.$0];};bF.toList=function(bO){return bO.$==0?bl.Empty:P.ofArray([bO.$0]);};bF.toNullable=function(bO){return bO.$==1?bO.$0:null;};bF.toObj=function(bO){return bO.$==0?null:bO.$0;};bG.TryParseBool=function(bO,bP){var bQ;bQ=bO.toLowerCase();return bQ=="true"?(bP.set(true),true):bQ=="false"&&(bP.set(false),true);};bG.ParseBool=function(bO){var bP;bP=bO.toLowerCase();if(bP=="true")return true;else if(bP=="false")return false;else throw new ba.New$1("String was not recognized as a valid Boolean.");};bG.TryParse=function(bO,bP,bQ,bR){var bS,bT;bS=+bO;bT=bS===bS-bS%1&&bS>=bP&&bS<=bQ;if(bT)bR.set(bS);return bT;};bG.Parse=function(bO,bP,bQ,bR){var bS;bS=+bO;if(bS!==bS-bS%1)throw new ba.New$1("Input string was not in a correct format.");else if(bS<bP||bS>bQ)throw new bb.New$1(bR);else return bS;};bG.ParseByte=function(bO){return bG.Parse(bO,0,255,"Value was either too large or too small for an unsigned byte.");};bG.TryParseByte=function(bO,bP){return bG.TryParse(bO,0,255,bP);};bG.ParseSByte=function(bO){return bG.Parse(bO,-128,127,"Value was either too large or too small for a signed byte.");};bG.TryParseSByte=function(bO,bP){return bG.TryParse(bO,-128,127,bP);};bG.ParseInt16=function(bO){return bG.Parse(bO,-32768,32767,"Value was either too large or too small for an Int16.");};bG.TryParseInt16=function(bO,bP){return bG.TryParse(bO,-32768,32767,bP);};bG.ParseInt32=function(bO){return bG.Parse(bO,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bG.TryParseInt32=function(bO,bP){return bG.TryParse(bO,-2147483648,2147483647,bP);};bG.ParseUInt16=function(bO){return bG.Parse(bO,0,65535,"Value was either too large or too small for an UInt16.");};bG.TryParseUInt16=function(bO,bP){return bG.TryParse(bO,0,65535,bP);};bG.ParseUInt32=function(bO){return bG.Parse(bO,0,4294967295,"Value was either too large or too small for an UInt32.");};bG.TryParseUInt32=function(bO,bP){return bG.TryParse(bO,0,4294967295,bP);};bG.ParseInt64=function(bO){return bG.Parse(bO,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bG.TryParseInt64=function(bO,bP){return bG.TryParse(bO,-9223372036854775808,9223372036854775807,bP);};bG.ParseUInt64=function(bO){return bG.Parse(bO,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bG.TryParseUInt64=function(bO,bP){return bG.TryParse(bO,0,18446744073709551615,bP);};}(self));
